<html>

<head>
<title>NodeBox | Outside the canvas</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="imagetoolbar" content="no" />
<meta http-equiv="linode" content="true"/>
<meta name="description" content="" />
<meta name="keywords" content="NodeBox, shared 2008-08-27-18-07-51, question" />
<link rel="alternate" type="application/rss+xml" title="NodeBox News Feed" href="https://nodebox.net/code/data/rss.xml" />
<link rel="canonical" href="https://nodebox.net/code/index.php/shared_2008-08-27-18-07-51" />
<link type="text/css" rel="stylesheet" media="screen" href="../../media/css/nbar.css">

<script type="text/javascript" src="../js/pop.js"></script>
<script type="text/javascript" src="../js/confirm.js"></script>
<link href="../css/default.css" rel="stylesheet" type="text/css" />
<link href="../css/print.css" rel="stylesheet" type="text/css" media="print" />
<!--[if gte IE 5.5]>
<script type="text/javascript" src="/code/js/pngfix.js"></script>
<![endif]-->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1668598-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body id="body" >
<div class="nbar">
  <ol>
    <li><a class="node" href="https://www.nodebox.net/code/">NodeBox 1<span class="nbar-arrow"></span></a>
      <ol class="nbar-dropdown">
        <li><a href="https://www.nodebox.net/">Homepage</a></li>
        <li><a href="https://www.nodebox.net/node/">NodeBox 3<small>Node-based app for generative design and data visualization</small></a></li>
        <li><a href="https://www.nodebox.net/opengl/">NodeBox OpenGL<small>Hardware-accelerated cross-platform graphics library</small></a></li>
        <li><a href="https://www.nodebox.net/code/">NodeBox 1<small>Generate 2D visuals using Python code (Mac OS X only)</small></a></li>
      </ol>
    </li>
    <li><a class="gallery" href="https://www.nodebox.net/gallery/">Gallery</a></li>
    <li><a class="documentation" href="Tutorial.html">Documentation</a></li>
    <li><a class="forum" href="http://support.nodebox.net/discussions">Forum</a></li>
    <li><a class="blog" href="https://www.nodebox.net/blog/">Blog</a></li>
  </ol>
</div>


<div id="all">
<div id="header_and_navigation">

<div id="header">
<a href="Home.html"><img id="header_image" src="../g/header-small.jpg" width="800" /></a></div>

<div id="title">
<a href="Home.html"><h1>NodeBox</h1>
<strong><em>Create visual output with Python programming code</em></strong>
</a></div>

<div id="contextual">
<div id="languages">
 
</div>

<div id="search">
<form id = "sf" method="get">
<input type="text" id="q" name="q" value="" />
<a href="javascript:document.getElementById('sf').submit();">GO</a>
</form>
</div>

</div>

<div id="navigation">
<div id="navigation_public">
<a id="" href="Home.html">Home</a> 
<a id="" href="Download.html">Download</a> 
<a id="" href="Reference.html">Reference</a> 
<a id="" href="Tutorial.html">Tutorial</a> 
<a id="" href="Library.html">Library</a> 
<a id="" href="Gallery.html">Gallery</a> 
<a id="" href="Share.html">Share</a> 
<a id="" href="About.html">About</a> 
</div>
</div>
 
</div>

<div id="content">

<div id="nodebox-link">
<a href="Home.html"><img src="../g/transparent.gif" /></a>
</div>

<div class="inside">
<? if (do_name() != 'Home') : ?>
 <? endif ?>
<br /><div class="comment"><h1 id="shared-title">Outside the canvas</h1>
<strong>Posted by <span class="comment_by">Nortis</span> on <em class="date">Aug 27, 2008</em></strong>
<p>When I'm placing things randomly on the canvas. How can I make shore that nothing gets placed outside the screen?<br><br>I'm pretty shore there is a silly simple solution to this that just are to simple to think of. </b></i></a></ul></li></pre></p><br /></div>
&nbsp;<hr /><div class='comment'><strong>Posted by <span class="comment_by">fdb</span> on <em class="date">Aug 28, 2008</em></strong><p>It depends on the type of shape you're placing, but for simple rects or ovals, this will do:<pre class="python"><span style="color: #530035;">size</span><span style="">&#40;</span><span style="">200</span>, <span style="">200</span><span style="">&#41;</span>
&nbsp;
<span style="color: #530035;">for</span> i <span style="color: #530035;">in</span> <span style="">range</span><span style="">&#40;</span><span style="">100</span><span style="">&#41;</span>:
    <span style="color: #530035;">fill</span><span style="">&#40;</span><span style="color: #530035;">random</span><span style="">&#40;</span><span style="">&#41;</span>, <span style="">0</span>, <span style="">0</span><span style="">&#41;</span>
    <span style="color: #530035;">rect</span><span style="">&#40;</span><span style="color: #530035;">random</span><span style="">&#40;</span>WIDTH<span style="">-30</span><span style="">&#41;</span>, <span style="color: #530035;">random</span><span style="">&#40;</span>HEIGHT<span style="">-30</span><span style="">&#41;</span>, <span style="">30</span>, <span style="">30</span><span style="">&#41;</span></pre></pre>For the x and y values, I use random values that lie between zero and the width of the canvas, <i>minus</i> the size of the shape. This will make sure they stay in the canvas. </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">fdb</span> on <em class="date">Aug 28, 2008</em></strong><p>As an alternative, if you want to use any shape, and compare it to any other shape, consider the following approach. Here, we use boolean operations to check if paths don't intersect eachother. This is the most generic and powerful way to do shape-in-shape placement.<pre class="python"><span style="color: #530035;">size</span><span style="">&#40;</span><span style="">200</span>, <span style="">200</span><span style="">&#41;</span>
&nbsp;
canvas_rect = <span style="color: #530035;">rect</span><span style="">&#40;</span><span style="">0</span>, <span style="">0</span>, <span style="color: #530035;">WIDTH</span>, <span style="color: #530035;">HEIGHT</span>, draw=<span style="color: #530035;">False</span><span style="">&#41;</span>
&nbsp;
path = <span style="color: #530035;">textpath</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;A&quot;</span>, <span style="">10</span>, <span style="">10</span><span style="">&#41;</span>
path.<span style="">fit</span><span style="">&#40;</span><span style="">0</span>, <span style="">0</span>, <span style="color: #530035;">WIDTH</span>, <span style="color: #530035;">HEIGHT</span><span style="">&#41;</span>
&nbsp;
<span style="color: grey;"># As an alternative, you can use any shape, such as this oval.</span>
<span style="color: grey;"># Comment out this line to use an oval instead of a letter.</span>
<span style="color: grey;"># path = oval(0,0,WIDTH,HEIGHT, draw=False)</span>
&nbsp;
<span style="color: grey;"># We need to check if the shape falls fully within the bounds</span>
<span style="color: grey;"># of the shape. To do that, we check if it *doesn't* intersect</span>
<span style="color: grey;"># with the negative of this shape. So we take a shape as big as</span>
<span style="color: grey;"># the canvas, and punch our path out of that, resulting in the</span>
<span style="color: grey;"># negative shape.</span>
negative = canvas_rect.<span style="">difference</span><span style="">&#40;</span>path<span style="">&#41;</span>
&nbsp;
<span style="color: grey;"># Now we place shapes by brute-force. We want 200 shapes,</span>
<span style="color: grey;"># so we run a loop that doesn't finish until we have 200 shapes.</span>
shapes = <span style="">&#91;</span><span style="">&#93;</span>
<span style="color: #530035;">while</span> <span style="">len</span><span style="">&#40;</span>shapes<span style="">&#41;</span> &lt; <span style="">200</span>:
    <span style="color: grey;"># Place a random shape somewhere. This can be any shape.</span>
    <span style="color: grey;"># Just don't make it too big, or it will never fit,</span>
    <span style="color: grey;"># resulting in an infinite loop.</span>
    r = <span style="color: #530035;">rect</span><span style="">&#40;</span><span style="color: #530035;">random</span><span style="">&#40;</span><span style="color: #530035;">WIDTH</span><span style="">&#41;</span>, <span style="color: #530035;">random</span><span style="">&#40;</span><span style="color: #530035;">HEIGHT</span><span style="">&#41;</span>, <span style="">4</span>, <span style="">4</span>, draw=<span style="color: #530035;">False</span><span style="">&#41;</span>
    <span style="color: grey;"># If this path doesn't intersect with the negative of the </span>
    <span style="color: grey;"># original path, append it to the list of shapes.</span>
    <span style="color: #530035;">if</span> <span style="color: #530035;">not</span> negative.<span style="">intersects</span><span style="">&#40;</span>r<span style="">&#41;</span>:
        shapes.<span style="">append</span><span style="">&#40;</span>r<span style="">&#41;</span>
&nbsp;
<span style="color: grey;"># Now, draw each of the shapes.</span>
<span style="color: #530035;">for</span> shape <span style="color: #530035;">in</span> shapes:
    <span style="color: #530035;">fill</span><span style="">&#40;</span><span style="color: #530035;">random</span><span style="">&#40;</span><span style="">&#41;</span>, <span style="">0</span>, <span style="">0</span><span style="">&#41;</span>
    <span style="color: #530035;">drawpath</span><span style="">&#40;</span>shape<span style="">&#41;</span></pre></pre>See the documentation on compound paths to get the details behind this method: <a href="http://nodebox.net/code/index.php/Compound_paths">http://nodebox.net/code/index.php/Compound_paths</a> </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Nortis</span> on <em class="date">Sep 01, 2008</em></strong><p>Nice! Thank you both of you :) </b></i></a></ul></li></pre></p><br /></div><? include("util/comment.php"); ?>
</div>
  
</div>

<div id="footer">
Last modified: Sep 01 2008 | &copy; 2004-2012 <a href="http://www.emrg.be/" class="noexternal">Experimental Media Research Group</a>
</div>
<img src="../g/footer.jpg" style="border:0" class="footer" width="800" height="334" />

</div>

<script>
try{e=document.getElementsByTagName("span");for(i=0;i<e.length;i++){if(e[i].className=="header_image"){src=e[i].getElementsByTagName("img")[0].src;document.getElementById("header_image").src=src;break;}}}catch(e){}
</script>
</body>

</html>