<html>

<head>
<title>NodeBox | Math</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="imagetoolbar" content="no" />
<meta http-equiv="linode" content="true"/>
<meta name="description" content="" />
<meta name="keywords" content="NodeBox, Math, " />
<link rel="alternate" type="application/rss+xml" title="NodeBox News Feed" href="https://nodebox.net/code/data/rss.xml" />
<link rel="canonical" href="https://nodebox.net/code/index.php/Math" />
<link type="text/css" rel="stylesheet" media="screen" href="../../media/css/nbar.css">

<script type="text/javascript" src="../js/pop.js"></script>
<script type="text/javascript" src="../js/confirm.js"></script>
<link href="../css/default.css" rel="stylesheet" type="text/css" />
<link href="../css/print.css" rel="stylesheet" type="text/css" media="print" />
<!--[if gte IE 5.5]>
<script type="text/javascript" src="/code/js/pngfix.js"></script>
<![endif]-->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1668598-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body id="body" >
<div class="nbar">
  <ol>
    <li><a class="node" href="https://www.nodebox.net/code/">NodeBox 1<span class="nbar-arrow"></span></a>
      <ol class="nbar-dropdown">
        <li><a href="https://www.nodebox.net/">Homepage</a></li>
        <li><a href="https://www.nodebox.net/node/">NodeBox 3<small>Node-based app for generative design and data visualization</small></a></li>
        <li><a href="https://www.nodebox.net/opengl/">NodeBox OpenGL<small>Hardware-accelerated cross-platform graphics library</small></a></li>
        <li><a href="https://www.nodebox.net/code/">NodeBox 1<small>Generate 2D visuals using Python code (Mac OS X only)</small></a></li>
      </ol>
    </li>
    <li><a class="gallery" href="https://www.nodebox.net/gallery/">Gallery</a></li>
    <li><a class="documentation" href="Tutorial.html">Documentation</a></li>
    <li><a class="forum" href="http://support.nodebox.net/discussions">Forum</a></li>
    <li><a class="blog" href="https://www.nodebox.net/blog/">Blog</a></li>
  </ol>
</div>


<div id="all">
<div id="header_and_navigation">

<div id="header">
<a href="Home.html"><img id="header_image" src="../g/header-small.jpg" width="800" /></a></div>

<div id="title">
<a href="Home.html"><h1>NodeBox</h1>
<strong><em>Create visual output with Python programming code</em></strong>
</a></div>

<div id="contextual">
<div id="languages">
 
</div>

<div id="search">
<form id = "sf" method="get">
<input type="text" id="q" name="q" value="" />
<a href="javascript:document.getElementById('sf').submit();">GO</a>
</form>
</div>

</div>

<div id="navigation">
<div id="navigation_public">
<a id="" href="Home.html">Home</a> 
<a id="" href="Download.html">Download</a> 
<a id="" href="Reference.html">Reference</a> 
<a id="" href="Tutorial.html">Tutorial</a> 
<a id="" href="Library.html">Library</a> 
<a id="" href="Gallery.html">Gallery</a> 
<a id="" href="Share.html">Share</a> 
<a id="" href="About.html">About</a> 
</div>
</div>
 
</div>

<div id="content">

<div id="nodebox-link">
<a href="Home.html"><img src="../g/transparent.gif" /></a>
</div>

<div class="inside">
<? if (do_name() != 'Home') : ?>
 <h3>Math</h3><? endif ?>
<p>More often than not programming scripts in NodeBox involves a little bit of mathematics. Things like fluid motion, orbitting behavior and easing in and out all require math formulas. Since most of us probably weren&#39;t paying any attention during math class, this document explains some useful math techniques. </p><h2>Math geometry</h2><p>Sometimes you have the location of two points and you want to know the angle between them. Or the distance. Or you have the coordinates of one point and want to know the location of the second point based on an angle and a distance. The following math commands might be of help. You can also find the basics about sines and cosines <a href="Math_trigonometry.html" target="_self">here</a>.<br /></p><p>The angle between two points:</p><pre class="python"><span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>angle</span><span style="">&#40;</span>x0, y0, x1, y1<span style="">&#41;</span>:
    <span style="color: #530035;">from</span> <span style="">math</span> <span style="color: #530035;">import</span> degrees, atan2
    a = degrees<span style="">&#40;</span> atan2<span style="">&#40;</span>y1-y0, x1-x0<span style="">&#41;</span> <span style="">&#41;</span>
    <span style="color: #530035;">return</span> a</pre></pre><p> The distance between two points:</p><pre class="python"><span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>distance</span><span style="">&#40;</span>x0, y0, x1, y1<span style="">&#41;</span>:
    <span style="color: #530035;">from</span> <span style="">math</span> <span style="color: #530035;">import</span> sqrt, <span style="">pow</span>
    <span style="color: #530035;">return</span> sqrt<span style="">&#40;</span><span style="">pow</span><span style="">&#40;</span>x1-x0, <span style="">2</span><span style="">&#41;</span> + <span style="">pow</span><span style="">&#40;</span>y1-y0, <span style="">2</span><span style="">&#41;</span><span style="">&#41;</span></pre></pre><p>The location of a point based on angle and distance:</p><pre class="python"><span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>coordinates</span><span style="">&#40;</span>x0, y0, distance, angle<span style="">&#41;</span>:
    <span style="color: #530035;">from</span> <span style="">math</span> <span style="color: #530035;">import</span> radians, sin, cos
    x1 = x0 + cos<span style="">&#40;</span>radians<span style="">&#40;</span>angle<span style="">&#41;</span><span style="">&#41;</span> * distance
    y1 = y0 + sin<span style="">&#40;</span>radians<span style="">&#40;</span>angle<span style="">&#41;</span><span style="">&#41;</span> * distance
    <span style="color: #530035;">return</span> x1, y1</pre></pre><p>The reflection of a point through an origin point:</p><pre class="python"><span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>reflect</span><span style="">&#40;</span>x0, y0, x1, y1, d=<span style="">1.0</span>, a=<span style="">180</span><span style="">&#41;</span>:
    d *= distance<span style="">&#40;</span>x0, y0, x1, y1<span style="">&#41;</span>
    a += angle<span style="">&#40;</span>x0, y0, x1, y1<span style="">&#41;</span>
    x, y = coordinates<span style="">&#40;</span>x0, y0, d, a<span style="">&#41;</span>
    <span style="color: #530035;">return</span> x, y</pre></pre><p>To use these commands in your script, simply import them:</p><pre class="python"><span style="color: #530035;">from</span> nodebox.<span style="">geo</span> <span style="color: #530035;">import</span> angle, distance, coordinates, reflect</pre></pre></p>&nbsp;<p>Some examples: </p><table border="0"><tbody><tr><td> <img src="../data/media/math-angle.jpg" alt="math-angle" /></td><td><p>The direction from the center of random points. </p><pre class="python">x0, y0, r = <span style="color: #530035;">WIDTH</span>/<span style="">2</span>, <span style="color: #530035;">HEIGHT</span>/<span style="">2</span>, <span style="">2</span>
&nbsp;
<span style="color: #530035;">for</span> i <span style="color: #530035;">in</span> <span style="">range</span><span style="">&#40;</span><span style="">5</span><span style="">&#41;</span>:
    x1 = <span style="color: #530035;">random</span><span style="">&#40;</span><span style="color: #530035;">WIDTH</span><span style="">&#41;</span>
    y1 = <span style="color: #530035;">random</span><span style="">&#40;</span><span style="color: #530035;">HEIGHT</span><span style="">&#41;</span>
    <span style="color: #530035;">oval</span><span style="">&#40;</span>x1-r, y1-r, r*<span style="">2</span>, r*<span style="">2</span><span style="">&#41;</span>
    a = angle<span style="">&#40;</span>x0, y0, x1, y1<span style="">&#41;</span>
    <span style="color: #530035;">transform</span><span style="">&#40;</span>CORNER<span style="">&#41;</span>
    <span style="color: #530035;">translate</span><span style="">&#40;</span>x0, y0<span style="">&#41;</span>
    <span style="color: #530035;">rotate</span><span style="">&#40;</span>-a<span style="">&#41;</span>
    <span style="color: #530035;">arrow</span><span style="">&#40;</span><span style="">30</span>, <span style="">0</span>, <span style="">10</span><span style="">&#41;</span>
    <span style="color: #530035;">reset</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre></td></tr><tr><td>  <img src="../data/media/math-coordinates.jpg" alt="math-coordinates" /></td><td><p> Orbiting around(x0, y0). </p><pre class="python">x0, y0, r = <span style="color: #530035;">WIDTH</span>/<span style="">2</span>, <span style="color: #530035;">HEIGHT</span>/<span style="">2</span>, <span style="">2</span>
<span style="color: #530035;">oval</span><span style="">&#40;</span>x0-r, y0-r, r*<span style="">2</span>, r*<span style="">2</span><span style="">&#41;</span>
&nbsp;
<span style="color: #530035;">for</span> i <span style="color: #530035;">in</span> <span style="">range</span><span style="">&#40;</span><span style="">10</span><span style="">&#41;</span>:
    a = <span style="">36</span>*i
    x1, y1 = coordinates<span style="">&#40;</span>x0, y0, <span style="">85</span>, a<span style="">&#41;</span>
    <span style="color: #530035;">oval</span><span style="">&#40;</span>x1-r, y1-r, r*<span style="">2</span>, r*<span style="">2</span><span style="">&#41;</span>
    <span style="color: #530035;">line</span><span style="">&#40;</span>x0, y0, x1, y1<span style="">&#41;</span></pre></pre></td></tr><tr><td> <img src="http://nodebox.net/code/data/media/math-perpendicular.jpg" alt="math-perpendicular" /></td><td><p>Perpendicular lines on a circle path:<br />angle between a point and its handle - 90 degrees. </p><pre class="python">path = <span style="color: #530035;">oval</span><span style="">&#40;</span><span style="">100</span>, <span style="">100</span>, <span style="">105</span>, <span style="">105</span><span style="">&#41;</span>
<span style="color: #530035;">for</span> t <span style="color: #530035;">in</span> <span style="">range</span><span style="">&#40;</span><span style="">50</span><span style="">&#41;</span>:
    pt = path.<span style="">point</span><span style="">&#40;</span><span style="">float</span><span style="">&#40;</span>t<span style="">&#41;</span> / <span style="">50</span><span style="">&#41;</span>
    a = angle<span style="">&#40;</span>pt.<span style="">x</span>, pt.<span style="">y</span>, 
        pt.<span style="">ctrl2</span>.<span style="">x</span>, pt.<span style="">ctrl2</span>.<span style="">y</span><span style="">&#41;</span>
    <span style="color: #530035;">transform</span><span style="">&#40;</span>CORNER<span style="">&#41;</span>
    <span style="color: #530035;">push</span><span style="">&#40;</span><span style="">&#41;</span>
    <span style="color: #530035;">translate</span><span style="">&#40;</span>pt.<span style="">x</span>, pt.<span style="">y</span><span style="">&#41;</span>
    <span style="color: #530035;">rotate</span><span style="">&#40;</span>-a<span style="">+90</span><span style="">&#41;</span>
    <span style="color: #530035;">line</span><span style="">&#40;</span><span style="">0</span>, <span style="">0</span>, <span style="">35</span>, <span style="">0</span><span style="">&#41;</span>
    <span style="color: #530035;">pop</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre></td></tr></tbody></table><br /><p>&nbsp;</p> <h2>Math sequences</h2><p>Sometimes you want to give a position and/or size to objects in such a way that they interrelate to each other, that there is some kind of ordering or harmony between them. Sine waves for example are great to describe motion because they ease in and out. Another interesting proportional principle is the <i>golden ratio</i>, the 3-5-8 rule. It has been around in aesthetics for a long long time. The great thing about it is that it can be expressed as a mathematical series (Fibonacci sequence).</p><pre class="python"><span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>fib</span><span style="">&#40;</span>n<span style="">&#41;</span>:
    <span style="color: #530035;">if</span> n == <span style="">0</span>: <span style="color: #530035;">return</span> <span style="">0</span>
    <span style="color: #530035;">if</span> n == <span style="">1</span>: <span style="color: #530035;">return</span> <span style="">1</span>
    <span style="color: #530035;">if</span> n &gt;= <span style="">2</span>: <span style="color: #530035;">return</span> fib<span style="">&#40;</span>n<span style="">-1</span><span style="">&#41;</span> + fib<span style="">&#40;</span>n<span style="">-2</span><span style="">&#41;</span>
&nbsp;
<span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>goldenratio</span><span style="">&#40;</span>n, f=<span style="">4</span><span style="">&#41;</span>:
    <span style="color: grey;"># Returns two proportional numbers whose sum is n.</span>
    f = <span style="">max</span><span style="">&#40;</span><span style="">1</span>, <span style="">min</span><span style="">&#40;</span>f, <span style="">10</span><span style="">&#41;</span><span style="">&#41;</span>
    n /= <span style="">float</span><span style="">&#40;</span>fib<span style="">&#40;</span>f<span style="">+2</span><span style="">&#41;</span><span style="">&#41;</span>
    <span style="color: #530035;">return</span> n*fib<span style="">&#40;</span>f<span style="">+1</span><span style="">&#41;</span>, n*fib<span style="">&#40;</span>f<span style="">&#41;</span></pre></pre></p>&nbsp;         <p>Colored rectangles proportioned with the golden ratio:</p><table border="0"><tbody><tr><td><img src="../data/media/math-fib1.jpg" alt="math-fib1" /></td><td><pre class="python">w1, w2 = goldenratio<span style="">&#40;</span><span style="">260</span><span style="">&#41;</span>
h1, h2 = goldenratio<span style="">&#40;</span><span style="">260</span><span style="">&#41;</span>
b1, b2 = goldenratio<span style="">&#40;</span><span style="">1.0</span><span style="">&#41;</span>
b3, b4 = goldenratio<span style="">&#40;</span>b1<span style="">&#41;</span>
&nbsp;
<span style="color: #530035;">fill</span><span style="">&#40;</span><span style="">0</span>, b1/<span style="">2</span>, b1<span style="">&#41;</span>
<span style="color: #530035;">rect</span><span style="">&#40;</span><span style="">0</span>, <span style="">0</span>, w1, h1<span style="">&#41;</span>
&nbsp;
<span style="color: #530035;">fill</span><span style="">&#40;</span><span style="">0</span>, b2/<span style="">2</span>, b2<span style="">&#41;</span>
<span style="color: #530035;">rect</span><span style="">&#40;</span>w1, <span style="">0</span>, w2, h1<span style="">&#41;</span>
&nbsp;
<span style="color: #530035;">fill</span><span style="">&#40;</span><span style="">0</span>, b4/<span style="">2</span>, b4<span style="">&#41;</span>
<span style="color: #530035;">rect</span><span style="">&#40;</span><span style="">0</span>, h1, w1+w2, h2<span style="">&#41;</span></pre></pre></td></tr><tr><td> <img src="../data/media/math-fib2.jpg" alt="math-fib2" /></td><td><pre class="python">x, y = <span style="">0</span>, <span style="">0</span>
w, h = <span style="">260</span>, <span style="">260</span>
&nbsp;
th = h <span style="color: grey;"># top height</span>
bh = <span style="">0</span> <span style="color: grey;"># bottom height</span>
<span style="color: #530035;">for</span> i <span style="color: #530035;">in</span> <span style="">range</span><span style="">&#40;</span><span style="">10</span><span style="">&#41;</span>:
    th, bh = goldenratio<span style="">&#40;</span>th<span style="">&#41;</span>
    v = <span style="">float</span><span style="">&#40;</span>th<span style="">&#41;</span>/w + <span style="">0.3</span>
    <span style="color: #530035;">fill</span><span style="">&#40;</span><span style="">0</span>, v/<span style="">2</span>, v<span style="">&#41;</span>
    <span style="color: #530035;">rect</span><span style="">&#40;</span>x, y, w, th<span style="">&#41;</span>
    y += th
    th = bh</pre></pre></td></tr></tbody></table><p>&nbsp;</p><? include("util/comment.php"); ?>
</div>
  
</div>

<div id="footer">
Last modified: May 04 2008 | &copy; 2004-2012 <a href="http://www.emrg.be/" class="noexternal">Experimental Media Research Group</a>
</div>
<img src="../g/footer.jpg" style="border:0" class="footer" width="800" height="334" />

</div>

<script>
try{e=document.getElementsByTagName("span");for(i=0;i<e.length;i++){if(e[i].className=="header_image"){src=e[i].getElementsByTagName("img")[0].src;document.getElementById("header_image").src=src;break;}}}catch(e){}
</script>
</body>

</html>