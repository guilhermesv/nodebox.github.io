<html>

<head>
<title>NodeBox | Peter De Jong attractor</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="imagetoolbar" content="no" />
<meta http-equiv="linode" content="true"/>
<meta name="description" content="" />
<meta name="keywords" content="NodeBox, shared 2008-02-29-18-05-38, artwork, source code" />
<link rel="alternate" type="application/rss+xml" title="NodeBox News Feed" href="https://nodebox.net/code/data/rss.xml" />
<link rel="canonical" href="https://nodebox.net/code/index.php/shared_2008-02-29-18-05-38" />
<link type="text/css" rel="stylesheet" media="screen" href="../../media/css/nbar.css">

<script type="text/javascript" src="../js/pop.js"></script>
<script type="text/javascript" src="../js/confirm.js"></script>
<link href="../css/default.css" rel="stylesheet" type="text/css" />
<link href="../css/print.css" rel="stylesheet" type="text/css" media="print" />
<!--[if gte IE 5.5]>
<script type="text/javascript" src="/code/js/pngfix.js"></script>
<![endif]-->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1668598-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body id="body" >
<div class="nbar">
  <ol>
    <li><a class="node" href="https://www.nodebox.net/code/">NodeBox 1<span class="nbar-arrow"></span></a>
      <ol class="nbar-dropdown">
        <li><a href="https://www.nodebox.net/">Homepage</a></li>
        <li><a href="https://www.nodebox.net/node/">NodeBox 3<small>Node-based app for generative design and data visualization</small></a></li>
        <li><a href="https://www.nodebox.net/opengl/">NodeBox OpenGL<small>Hardware-accelerated cross-platform graphics library</small></a></li>
        <li><a href="https://www.nodebox.net/code/">NodeBox 1<small>Generate 2D visuals using Python code (Mac OS X only)</small></a></li>
      </ol>
    </li>
    <li><a class="gallery" href="https://www.nodebox.net/gallery/">Gallery</a></li>
    <li><a class="documentation" href="Tutorial.html">Documentation</a></li>
    <li><a class="forum" href="http://support.nodebox.net/discussions">Forum</a></li>
    <li><a class="blog" href="https://www.nodebox.net/blog/">Blog</a></li>
  </ol>
</div>


<div id="all">
<div id="header_and_navigation">

<div id="header">
<a href="Home.html"><img id="header_image" src="../g/header-small.jpg" width="800" /></a></div>

<div id="title">
<a href="Home.html"><h1>NodeBox</h1>
<strong><em>Create visual output with Python programming code</em></strong>
</a></div>

<div id="contextual">
<div id="languages">
 
</div>

<div id="search">
<form id = "sf" method="get">
<input type="text" id="q" name="q" value="" />
<a href="javascript:document.getElementById('sf').submit();">GO</a>
</form>
</div>

</div>

<div id="navigation">
<div id="navigation_public">
<a id="" href="Home.html">Home</a> 
<a id="" href="Download.html">Download</a> 
<a id="" href="Reference.html">Reference</a> 
<a id="" href="Tutorial.html">Tutorial</a> 
<a id="" href="Library.html">Library</a> 
<a id="" href="Gallery.html">Gallery</a> 
<a id="" href="Share.html">Share</a> 
<a id="" href="About.html">About</a> 
</div>
</div>
 
</div>

<div id="content">

<div id="nodebox-link">
<a href="Home.html"><img src="../g/transparent.gif" /></a>
</div>

<div class="inside">
<? if (do_name() != 'Home') : ?>
 <? endif ?>
<br /><div class="comment"><h1 id="shared-title">Peter De Jong attractor</h1> <b>Posted by <span class="comment_by">tomds</span> on <i class="date">Feb 29, 2008</i></b> <br /><br /><img src="../data/shared/2008-02-29-18-05-38_Picture_2.png" /><br /><br /> <p>Peter De Jong attractor for Core Image. You can increase the "resolution" by doing more iterations (n) on a bigger scale, and then downscale the resulting layer. </p><pre class="python">coreimage = <span style="color: #530035;">ximport</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;coreimage&quot;</span><span style="">&#41;</span>
&nbsp;
<span style="color: #530035;">from</span> <span style="">math</span> <span style="color: #530035;">import</span> sin, cos
<span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>peter_de_jong_attractor</span><span style="">&#40;</span>pixels, a, b, c, d, n=<span style="">100000</span>, <span style="color: #530035;">scale</span>=<span style="">100</span>, <span style="color: #530035;">color</span>=<span style="color: #530035;">color</span><span style="">&#40;</span><span style="">0</span><span style="">&#41;</span><span style="">&#41;</span>:
    x0, y0 = <span style="">0.0</span>, <span style="">0.0</span>
    <span style="color: #530035;">for</span> i <span style="color: #530035;">in</span> <span style="">range</span><span style="">&#40;</span>n<span style="">&#41;</span>:
        x1 = sin<span style="">&#40;</span>a*y0<span style="">&#41;</span> - cos<span style="">&#40;</span>b*x0<span style="">&#41;</span>
        y1 = sin<span style="">&#40;</span>c*x0<span style="">&#41;</span> - cos<span style="">&#40;</span>d*y0<span style="">&#41;</span>
        pixels.<span style="">set_pixel</span><span style="">&#40;</span>
            pixels.<span style="">w</span>/<span style="">2</span> + x1*<span style="color: #530035;">scale</span>, 
            pixels.<span style="">h</span>/<span style="">2</span> + y1*<span style="color: #530035;">scale</span>, <span style="color: #530035;">color</span><span style="">&#41;</span>
        x0, y0 = x1, y1
&nbsp;
canvas = coreimage.<span style="">canvas</span><span style="">&#40;</span><span style="">800</span>, <span style="">800</span><span style="">&#41;</span>
l = canvas.<span style="color: #530035;">fill</span><span style="">&#40;</span><span style="color: #530035;">color</span><span style="">&#40;</span><span style="">1</span><span style="">&#41;</span><span style="">&#41;</span>
p = l.<span style="">pixels</span><span style="">&#40;</span><span style="">&#41;</span>
&nbsp;
peter_de_jong_attractor<span style="">&#40;</span>p, <span style="">1.4</span>, <span style="">-2.3</span>, <span style="">2.4</span>, <span style="">-2.2</span><span style="">&#41;</span>
&nbsp;
p.<span style="">update</span><span style="">&#40;</span><span style="">&#41;</span>
<span style="color: grey;">#l.scale(0.5)</span>
canvas.<span style="">draw</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><p> <br />Interesting parameters for the attractor can be found here: <br /><a href="http://ozviz.wasp.uwa.edu.au/~pbourke/fractals/peterdejong/" target="_self">http://ozviz.wasp.uwa.edu.au/~pbourke/fractals/peterdejong/</a> </p><br /></div>  <hr /><div class='comment'><strong>Posted by <span class="comment_by">Mark M</span> on <em class="date">Feb 29, 2008</em></strong><p>That is very cool. I just uploaded some images to the nodebox flickr pool that use the same functions. Yours brings out the structure of the attractor much more clearly. Thanks for sharing this. </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Tom De Smedt</span> on <em class="date">Feb 29, 2008</em></strong><p>Hi Mark, right after I uploaded this I saw the work you posted on Flickr. What I think is much more interesting to your approach is that you have curves, e.g. the design can still be scaled and transformed. If you are interested in sharing I'd very much like to see the source.
<br>
<br>I've been toying with the idea of creating a library for paths in analogy to what Core Image does for pixels, and Colors does for color: a bundle of path filters, connect algorithms, attractors, spirals, etc. 
<br>
<br>But first I want to release a library for grid layout, which I started developing after the "people may have a very clear or a very vague idea of what they want to do"-problem you mentioned. I feel NodeBox has a lot of functionality to create vaguely defined compositions; a grid library would be more helpful for concretely defined layouts. Hopefully it'll be ready in a week or two. </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Mark M</span> on <em class="date">Feb 29, 2008</em></strong><p>Tom,
<br>
<br>Yes, it is nice that it is in vector form. I've been thinking about refining these a bit and making some large prints for my walls. There are some metallic photo papers which would suit these very well.  The code is practically the same as above. It just defines anchor points rather than pixels and uses a related function to decide where to put control points.
<br>
<br>Both the grid and path libraries sound very useful. In illustrator you can define art brushes that map one bezier shape onto a different path so if you define say an arrow and apply it to a curve you end up with a curved arrow. I've been wondering how I might try to do this with nodebox.  It sounds like it might be related to your path library.
<br>
<br>Here is the code to one of the Flickr pieces. The others are more or less variations.<pre class="python"><span style="color: #530035;">from</span> <span style="">math</span> <span style="color: #530035;">import</span> sin, cos, pi
<span style="color: #530035;">size</span><span style="">&#40;</span><span style="">800</span>, <span style="">800</span><span style="">&#41;</span>
<span style="color: #530035;">background</span><span style="">&#40;</span><span style="">1</span>., <span style="">1</span>., .<span style="">98</span><span style="">&#41;</span>
&nbsp;
<span style="color: #530035;">colormode</span><span style="">&#40;</span><span style="color: #530035;">HSB</span><span style="">&#41;</span>
<span style="color: #530035;">nofill</span><span style="">&#40;</span><span style="">&#41;</span>
<span style="color: #530035;">strokewidth</span><span style="">&#40;</span>.<span style="">15</span><span style="">&#41;</span>
&nbsp;
<span style="color: #530035;">translate</span><span style="">&#40;</span><span style="">400</span>, <span style="">500</span><span style="">&#41;</span>
<span style="color: #530035;">autoclosepath</span><span style="">&#40;</span>close=<span style="color: #530035;">False</span><span style="">&#41;</span>
a = .<span style="">75875</span> 
b = <span style="">6.01</span>
c = <span style="">-0.84</span>
d = <span style="">-2.28</span>
x = <span style="">-7.13</span>
y = <span style="">8.43</span>
&nbsp;
<span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>xGen</span><span style="">&#40;</span>start<span style="">&#41;</span>:
    x= start
    <span style="color: #530035;">while</span> <span style="color: #530035;">True</span>:
        x = sin<span style="">&#40;</span>a * y<span style="">&#41;</span> - cos<span style="">&#40;</span>b * x<span style="">&#41;</span>
        dx = -cos<span style="">&#40;</span>b*x<span style="">&#41;</span>
        <span style="color: #530035;">yield</span> x*<span style="">300</span>, dx
&nbsp;
<span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>yGen</span><span style="">&#40;</span>start<span style="">&#41;</span>:
    y = start
    <span style="color: #530035;">while</span> <span style="color: #530035;">True</span>:
        y = sin<span style="">&#40;</span>c * x<span style="">&#41;</span> - cos<span style="">&#40;</span>d * y<span style="">&#41;</span>
        dy = -cos<span style="">&#40;</span>d*y<span style="">&#41;</span>
        <span style="color: #530035;">yield</span> y*<span style="">300</span>, dy
        
        
gx = xGen<span style="">&#40;</span>x<span style="">&#41;</span>
gy = yGen<span style="">&#40;</span>y<span style="">&#41;</span>
&nbsp;
&nbsp;
<span style="color: #530035;">for</span> i <span style="color: #530035;">in</span> <span style="">range</span><span style="">&#40;</span><span style="">3070</span><span style="">&#41;</span>:
&nbsp;
    x0, dx0 = gx.<span style="">next</span><span style="">&#40;</span><span style="">&#41;</span>
    y0, dy0 = gy.<span style="">next</span><span style="">&#40;</span><span style="">&#41;</span>
    
    x3, dx3 = gx.<span style="">next</span><span style="">&#40;</span><span style="">&#41;</span>
    y3, dy3 = gy.<span style="">next</span><span style="">&#40;</span><span style="">&#41;</span>
&nbsp;
    x1 = x0 +  <span style="">200</span>*dx0
    y1 = y0 +  <span style="">200</span>*dy0
   
    x2 = x3 -  <span style="">200</span>*dx3
    y2 = y3 -  <span style="">200</span>*dy3
&nbsp;
    <span style="color: #530035;">beginpath</span><span style="">&#40;</span>x0, x0<span style="">&#41;</span>
    <span style="color: #530035;">curveto</span><span style="">&#40;</span>x1, y1, x2, y2, x3, y3<span style="">&#41;</span>
    <span style="color: #530035;">stroke</span><span style="">&#40;</span>dx0/<span style="">2</span>,<span style="">0.4</span>,.<span style="">4</span>,.<span style="">15</span><span style="">&#41;</span>
    <span style="color: #530035;">endpath</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre></b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Julien L</span> on <em class="date">Mar 22, 2008</em></strong><p>Tom,
<br>I am really interested by your note on functional composition based on curve. Have you progressed on this topic ? 
<br> I also had the same idea, and I started to develop a tool to do it (which somehow happens to have some similarities with Nodebox), called XRVG. If you are interested, you can check it at <a href="http://xrvg.rubyforge.org/">http://xrvg.rubyforge.org/</a>. </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Julien L</span> on <em class="date">Mar 22, 2008</em></strong><p>Oops ... I reread my previous post, and you may find it a bit ... intrusive. What did I mean then is that if you are interested, I may try to port some of XRVG curve operators into Nodebox, even if my Python background is quite old now... Let me know what you think about this ... </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Tom De Smedt</span> on <em class="date">Mar 31, 2008</em></strong><p>Hi Julien, right now it's still just ideas based on some things <a href="Path_Filters.html">here</a> and <a href="http://www.organisms.be/index.php/Nebula">here</a> and what Mark Meyer is doing. I know Giorgio Olivero was working on a NodeBox Vector class so that's something to integrate as well. I've taken a look at XRVG (and the images on fractalyze) and there are certainly some interesting things going on. So yes, I might be quite interested in a Python port! </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Julien L</span> on <em class="date">Apr 02, 2008</em></strong><p>Hi Tom,<br><br>Glad you found some things interesting about XRVG. <br>And thanks for stating your idea sources, they are quite  inspiring. <br><br>OK for trying to port XRVG for NodeBox. Problem is that I work on Windows ... but I already tested the Nodebox Windows version, and it was OK then. However, I would not be able to use Cocoa methods...<br><br>About NodeBox Vector class, do you know when it will be available ? Because I heavily rely on such a class to do bezier computations...<br><br>Anyway, thanks again for your opinion, and I hope I will get some results soon... </b></i></a></ul></li></pre></p><br /></div><? include("util/comment.php"); ?>
</div>
  
</div>

<div id="footer">
Last modified: Apr 11 2008 | &copy; 2004-2012 <a href="http://www.emrg.be/" class="noexternal">Experimental Media Research Group</a>
</div>
<img src="../g/footer.jpg" style="border:0" class="footer" width="800" height="334" />

</div>

<script>
try{e=document.getElementsByTagName("span");for(i=0;i<e.length;i++){if(e[i].className=="header_image"){src=e[i].getElementsByTagName("img")[0].src;document.getElementById("header_image").src=src;break;}}}catch(e){}
</script>
</body>

</html>