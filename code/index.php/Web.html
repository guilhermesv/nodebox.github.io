<html>

<head>
<title>NodeBox | Web</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="imagetoolbar" content="no" />
<meta http-equiv="linode" content="true"/>
<meta name="description" content="" />
<meta name="keywords" content="NodeBox, Web, web, google, yahoo, BeautifulSoap, FeedParser, Kuler, Colr, Wikipedia, parse, screen scrape, morgueFile" />
<link rel="alternate" type="application/rss+xml" title="NodeBox News Feed" href="https://nodebox.net/code/data/rss.xml" />
<link rel="canonical" href="https://nodebox.net/code/index.php/Web" />
<link type="text/css" rel="stylesheet" media="screen" href="../../media/css/nbar.css">

<script type="text/javascript" src="../js/pop.js"></script>
<script type="text/javascript" src="../js/confirm.js"></script>
<link href="../css/default.css" rel="stylesheet" type="text/css" />
<link href="../css/print.css" rel="stylesheet" type="text/css" media="print" />
<!--[if gte IE 5.5]>
<script type="text/javascript" src="/code/js/pngfix.js"></script>
<![endif]-->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1668598-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body id="body" >
<div class="nbar">
  <ol>
    <li><a class="node" href="https://www.nodebox.net/code/">NodeBox 1<span class="nbar-arrow"></span></a>
      <ol class="nbar-dropdown">
        <li><a href="https://www.nodebox.net/">Homepage</a></li>
        <li><a href="https://www.nodebox.net/node/">NodeBox 3<small>Node-based app for generative design and data visualization</small></a></li>
        <li><a href="https://www.nodebox.net/opengl/">NodeBox OpenGL<small>Hardware-accelerated cross-platform graphics library</small></a></li>
        <li><a href="https://www.nodebox.net/code/">NodeBox 1<small>Generate 2D visuals using Python code (Mac OS X only)</small></a></li>
      </ol>
    </li>
    <li><a class="gallery" href="https://www.nodebox.net/gallery/">Gallery</a></li>
    <li><a class="documentation" href="Tutorial.html">Documentation</a></li>
    <li><a class="forum" href="http://support.nodebox.net/discussions">Forum</a></li>
    <li><a class="blog" href="https://www.nodebox.net/blog/">Blog</a></li>
  </ol>
</div>


<div id="all">
<div id="header_and_navigation">

<div id="header">
<a href="Home.html"><img id="header_image" src="../g/header-small.jpg" width="800" /></a></div>

<div id="title">
<a href="Home.html"><h1>NodeBox</h1>
<strong><em>Create visual output with Python programming code</em></strong>
</a></div>

<div id="contextual">
<div id="languages">
 
</div>

<div id="search">
<form id = "sf" method="get">
<input type="text" id="q" name="q" value="" />
<a href="javascript:document.getElementById('sf').submit();">GO</a>
</form>
</div>

</div>

<div id="navigation">
<div id="navigation_public">
<a id="" href="Home.html">Home</a> 
<a id="" href="Download.html">Download</a> 
<a id="" href="Reference.html">Reference</a> 
<a id="" href="Tutorial.html">Tutorial</a> 
<a id="" href="Library.html">Library</a> 
<a id="" href="Gallery.html">Gallery</a> 
<a id="" href="Share.html">Share</a> 
<a id="" href="About.html">About</a> 
</div>
</div>
 
</div>

<div id="content">

<div id="nodebox-link">
<a href="Home.html"><img src="../g/transparent.gif" /></a>
</div>

<div class="inside">
<? if (do_name() != 'Home') : ?>
 <h3>Web</h3><? endif ?>
<h2>Description</h2><p>The NodeBox Web library offers a collection of services to retrieve content from the internet. You can use the library to query <a href="http://www.yahoo.com" target="_self">Yahoo!</a> for links, images, news and spelling suggestions, to read RSS and Atom newsfeeds, to retrieve articles from <a href="http://en.wikipedia.org" target="_self">Wikipedia</a>, to collect quality images from <a href="http://www.morguefile.com" target="_self">morgueFile</a> or <a href="http://www.flickr.com" target="_self">Flickr</a>, to get color themes from <a href="http://kuler.adobe.com" target="_self">kuler</a> or <a href="http://www.colr.org" target="_self">Colr</a>, to browse through HTML documents, to clean up HTML, to validate URL&#39;s, to create GIF images from math equations using <a href="http://www.forkosh.com/mimetex.html" target="_self">mimeTeX</a>, to get ironic word definitions from <a href="http://www.urbandictionary.com" target="_self">Urban Dictionary</a>.<br /></p><p>The NodeBox Web library works with a caching mechanism that stores things you download from the web, so they can be retrieved faster the next time. Many of the services also work asynchronously. This means you can use the library in an animation that keeps on running while new content is downloaded in the background.</p><p>The library bundles Leonard Richardson&#39;s <a href="http://www.crummy.com/software/BeautifulSoup/" target="_self">Beautiful Soup</a> to parse HTM, Mark Pilgrim&#39;s <a href="http://www.feedparser.org/" target="_self">Universal Feed Parser</a> for newsfeeds, a connection to John Forkosh&#39;s mathTeX server (thanks Cedric Foellmi), Leif K-Brooks entity replace algorithm, <a href="http://code.google.com/p/simplejson/" target="_self">simplejson</a>, and patches for Debian from the people at <a href="http://indywiki.sourceforge.net/" target="_self">Indywiki</a>.<br /></p><h2>Download</h2><table border="0"><tbody><tr><td><a href="https://www.nodebox.net/code/data/media/web.zip" target="_self"><img src="http://nodebox.net/code/data/media/download.gif" alt="download" /></a></td><td><a href="https://www.nodebox.net/code/data/media/web-1.9.4.6.zip" target="_self">web.zip</a> (390KB)<br /><i>Last updated for NodeBox 1.9.4.6<br />Licensed under GPL<br /></i><i>Author: Tom De Smedt</i><br /></td></tr></tbody></table><h2>Documentation</h2><ul><li><a href="Web.html#library" target="_self">How to get the library up and running</a></li><li><a href="Web.html#validation" target="_self">Validating web content</a><br /> </li><li><a href="Web.html#url" target="_self">Working with URL&#39;s</a></li><li><a href="Web.html#html" target="_self">Working with HTML</a></li><li><a href="Web.html#yahoo" target="_self">Querying Yahoo! for links, images and news</a></li><li><a href="Web.html#yahoocontextual" target="_self">Improving Yahoo! results with a contextual search</a></li><li><a href="Web.html#yahoospelling" target="_self">Using Yahoo! to suggest spelling corrections</a><br /></li><li><a href="Web.html#yahoosort" target="_self">Using Yahoo! to sort associatively</a></li><li><a href="Web.html#google" target="_self">Querying Google</a><br /></li><li><a href="Web.html#newsfeed" target="_self">Reading newsfeeds</a></li><li><a href="Web.html#wikipedia" target="_self">Retrieving articles from Wikipedia</a></li><li><a href="Web.html#wikipediahelpers" target="_self">Some helper commands to draw Wikipedia content in NodeBox</a></li><li><a href="Web.html#morguefile" target="_self">Querying morgueFile for images</a></li><li><a href="Web.html#flickr" target="_self">Querying Flickr for images</a><br /></li><li><a href="Web.html#kuler" target="_self">Querying kuler for color themes</a></li><li><a href="Web.html#colr" target="_self">Querying Colr for color schemes</a></li><li><a href="Web.html#math" target="_self">Creating GIF images from math equations</a></li><li><a href="Web.html#urbandictionary" target="_self">Word definitions from Urban Dictionary</a><br /></li><li><a href="Web.html#asynchronous" target="_self">Working with asynchronous downloads</a></li><li><a href="Web.html#cache" target="_self">Clearing the cache</a></li><li><a href="Web.html#json" target="_self">Reading JSON</a><br /></li></ul><p>&nbsp;</p><hr /><h2><a title="library" name="library"></a>How to get the library up and running</h2><p>Put the <i>web</i> library folder in the same folder as your script so NodeBox can find the library. <br />You can also put it in <i>~/Library/Application Support/NodeBox/.</i></p><pre class="python">web = <span style="color: #530035;">ximport</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;web&quot;</span><span style="">&#41;</span></pre></pre><p><span class="small_text">Outside of NodeBox you can also just do <i>import web</i>.</span> </p><p><span class="grey_box">Proxy servers</span>&nbsp; <br /></p><p>If you are behind a proxy server the library may not be able to connect to the internet. <br />In that case you need to inform the library with the <i>set_proxy()</i> command:</p><pre class="python">web.<span style="">set_proxy</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;https://www.myproxyserver.com:80&quot;</span>, <span style="">type</span>=<span style="color: #ff0080;">&quot;https&quot;</span><span style="">&#41;</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <hr /><h2><a title="validation" name="validation"></a>Validating web content</h2><p>Web content is accessed with a URL, the address you use to connect to a place on the internet. The library has a number of commands to find out what type of content (e.g. web page, image, ...) is associated with a given URL.</p><p>The most basic command, <i>is_url()</i> checks whether a given string is a grammatically correct URL (e.g. <i>http://nodebox.net</i> but not <i>htp://nodebox.net</i>). It takes a wait parameter indicating the number of seconds after which the library should stop connecting to the internet and give up. </p><pre class="python">web.<span style="">is_url</span><span style="">&#40;</span>url, wait=<span style="">10</span><span style="">&#41;</span></pre></pre><p>Even if a URL is valid, it might not refer to actual content on the internet. We can check if a URL exists with the <i>not_found()</i> command: </p><pre class="python">web.<span style="">url</span>.<span style="">not_found</span><span style="">&#40;</span>url, wait=<span style="">10</span><span style="">&#41;</span></pre></pre><p>The following commands are useful to find out what content is associated with the URL. We can discern between HTML web pages which we can parse with <i><a href="Web.html#html" target="_self">page.parse()</a></i>, newsfeeds which we can parse with <i><a href="Web.html#newsfeed" target="_self">newsfeed.parse()</a></i>, images, audio and video etc. which we can download with <i><a href="Web.html#url" target="_self">url.retrieve()</a></i>. </p><pre class="python">web.<span style="">url</span>.<span style="">is_webpage</span><span style="">&#40;</span>url, wait=<span style="">10</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">url</span>.<span style="">is_stylesheet</span><span style="">&#40;</span>url, wait=<span style="">10</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">url</span>.<span style="">is_plaintext</span><span style="">&#40;</span>url, wait=<span style="">10</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">url</span>.<span style="">is_pdf</span><span style="">&#40;</span>url, wait=<span style="">10</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">url</span>.<span style="">is_newsfeed</span><span style="">&#40;</span>url, wait=<span style="">10</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">url</span>.<span style="">is_image</span><span style="">&#40;</span>url, wait=<span style="">10</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">url</span>.<span style="">is_audio</span><span style="">&#40;</span>url, wait=<span style="">10</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">url</span>.<span style="">is_video</span><span style="">&#40;</span>url, wait=<span style="">10</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">url</span>.<span style="">is_archive</span><span style="">&#40;</span>url, wait=<span style="">10</span><span style="">&#41;</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <hr /><h2><a title="url" name="url"></a>Working with URL&#39;s </h2><p>A <a href="http://en.wikipedia.org/wiki/Url" target="_self">URL</a> is&nbsp; the address you use to connect to a page on the internet, for example: <i>http://nodebox.net</i>. The NodeBox Web library can do three different things with a URL: download the content associated with it, parse it (find out which parts make up the URL) and construct it from scratch (a simple way to create a URL with HTTP GET or HTTP POST data).</p><pre class="python">web.<span style="">download</span><span style="">&#40;</span>url, wait=<span style="">60</span>, cache=<span style="color: #530035;">None</span>, <span style="">type</span>=<span style="color: #ff0080;">&quot;.html&quot;</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">save</span><span style="">&#40;</span>url, path=<span style="color: #ff0080;">&quot;&quot;</span>, wait=<span style="">60</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">url</span>.<span style="">retrieve</span><span style="">&#40;</span>url, wait=<span style="">60</span>, asynchronous=<span style="color: #530035;">False</span>, cache=<span style="color: #530035;">None</span>, <span style="">type</span>=<span style="color: #ff0080;">&quot;.html&quot;</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">url</span>.<span style="">parse</span><span style="">&#40;</span>url<span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">url</span>.<span style="">create</span><span style="">&#40;</span>url=<span style="color: #ff0080;">&quot;&quot;</span>, method=<span style="color: #ff0080;">&quot;get&quot;</span><span style="">&#41;</span></pre></pre><p>The <i>download()</i> command returns the content associated with the given web address. The command has an optional parameter <i>wait</i> that determines <b>how long to wait for a download</b>. If the time is exceeded, the download is aborted.</p><p>The last two parameters can be used to <b>cache downloaded content locally</b>, so it doesn&#39;t have to downloaded again in the future. The <i>cache</i> parameter is a string with the name of a subfolder in /cache where to store content. The <i>type</i> parameter is the file extension of the downloaded content. </p><p>The <i>save()</i> command stores the URL&#39;s content at the given local path. If no path is given it will attempt to extract a filename from the URL and store that in the current working directory. The path to the saved file is returned. </p><p>The Web library also has easier ways to deal with specific web content like HTML (<i>page.parse()</i> command) or Wikipedia articles (<i>wikipedia.search()</i> command) for example. </p><p>The <i>download()</i> command is actually an alias of the <i>url.retrieve()</i> command. This command has an additional <i>asynchronous</i> parameter useful to <b>download stuff in the background</b> while an animation keeps on running. We&#39;ll see about asynchronous downloads later on. The <i>url.retrieve()</i> command returns an object with a <i>data</i> property containing a string with the downloaded content. If you don&#39;t need anything that complicated just use the easy <i>download()</i> command:<br /></p><pre class="python"><span style="color: grey;"># Download an image from the NodeBox Gallery.</span>
url = <span style="color: #ff0080;">&quot;http://nodebox.net/code/data/media/twisted-final.jpg&quot;</span>
img = web.<span style="">download</span><span style="">&#40;</span>url<span style="">&#41;</span>
&nbsp;
<span style="color: grey;"># Display the image data in NodeBox.</span>
<span style="color: #530035;">image</span><span style="">&#40;</span><span style="color: #530035;">None</span>, <span style="">0</span>, <span style="">0</span>, data=img<span style="">&#41;</span>
&nbsp;
<span style="color: grey;"># Write the image data to a file.</span>
<span style="">file</span> = <span style="color: #530035;">open</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;twisted.jpg&quot;</span>, <span style="color: #ff0080;">&quot;w&quot;</span><span style="">&#41;</span>
<span style="">file</span>.<span style="">write</span><span style="">&#40;</span>img<span style="">&#41;</span>
<span style="">file</span>.<span style="">close</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <p><img src="http://nodebox.net/code/data/media/web_url1.jpg" alt="web_url1" /> <br /></p><p>&nbsp;</p><p>The <i>url.parse()</i> command splits a given url into its components. The returned objects has the following properties:</p><ul><li><i>url.protocol</i>: the type of internet service, usually <i>http</i></li><li><i>url.domain</i>: the domain name, for example, <i>nodebox.net</i><br /></li><li><i>url.username</i>: a username for a secure connection<br /></li><li><i>url.password</i>: a password for a secure connection </li><li><i>url.port</i>: the port number at the host</li><li><i>url.path</i>: the subdirectory at the server, for example <i>/code/index.php/</i></li><li><i>url.page</i>: the name of the document, for example <i>search</i><br /></li><li><i>url.anchor</i>: named anchor on the page<br /></li><li><i>url.query</i>: a dictionary of query string values, for example <i>{ &quot;q&quot;: &quot;pixels&quot; }</i><br /></li><li><i>url.method</i>: the query string method either &quot;get&quot; or &quot;post&quot; <br /></li></ul><p>In the same way the <i>url.create()</i> command returns an object with these properties. This command is useful to, for example, construct URL&#39;s with a POST query and pass that to <i>url.retrieve()</i> or <i>page.parse()</i>.</p><p>For example. this script retrieves the first 10 forum pages from NodeBox:</p><pre class="python">url = web.<span style="">url</span>.<span style="">create</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;http://nodebox.net/code/index.php/Share&quot;</span><span style="">&#41;</span>
url.<span style="">query</span><span style="">&#91;</span><span style="color: #ff0080;">&quot;p&quot;</span><span style="">&#93;</span> = <span style="">1</span>
<span style="color: #530035;">for</span> i <span style="color: #530035;">in</span> <span style="">range</span><span style="">&#40;</span><span style="">10</span><span style="">&#41;</span>:
    <span style="color: #530035;">print</span> web.<span style="">url</span>.<span style="">retrieve</span><span style="">&#40;</span>url<span style="">&#41;</span>.<span style="">data</span>
    url.<span style="">query</span><span style="">&#91;</span><span style="color: #ff0080;">&quot;p&quot;</span><span style="">&#93;</span> += <span style="">1</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <hr /><h2><a title="html" name="html"></a>Working with HTML</h2><p>The NodeBox Web library uses Leonard Richardson&#39;s <a href="http://www.crummy.com/software/BeautifulSoup/" target="_self">Beautiful Soup</a> to parse HTML content. This means you can search and loop through all the tags in the HTML. For example, you might want to download a HTML page from the internet, find all the links in it and then download all those links. Or find all the image tags in the source and then retrieve all those images with <i>download()</i>.</p><p>The <i>page.parse()</i> command takes a URL as input and returns a Beautiful Soup object. The optional <i>cached</i> parameter determines if downloaded pages should be cached locally for faster retrieval. </p><pre class="python">web.<span style="">page</span>.<span style="">parse</span><span style="">&#40;</span>url, wait=<span style="">10</span>, cached=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><p>You can get the meta information in the HTML header with the returned object&#39;s <i>title</i>, <i>description</i> and <i>keywords</i> properties:</p><pre class="python">html = web.<span style="">page</span>.<span style="">parse</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;http://nodebox.net&quot;</span><span style="">&#41;</span>
&nbsp;
<span style="color: #530035;">print</span> html.<span style="">description</span>
&gt;&gt;&gt; NodeBox <span style="color: #530035;">is</span> a Mac OS X application that lets you create 2D visuals 
&gt;&gt;&gt; <span style="">&#40;</span>static, animated <span style="color: #530035;">or</span> interactive<span style="">&#41;</span> using Python programming <span style="">code</span> 
&gt;&gt;&gt; <span style="color: #530035;">and</span> export them as a PDF <span style="color: #530035;">or</span> a QuickTime movie. <span style="">NodeBox</span> <span style="color: #530035;">is</span> free 
&gt;&gt;&gt; <span style="color: #530035;">and</span> well-documented.
&nbsp;
<span style="color: #530035;">print</span> html.<span style="">keywords</span>
&gt;&gt;&gt;<span style="">&#91;</span>u<span style="color: #ff0080;">'NodeBox'</span>, u<span style="color: #ff0080;">'Home'</span><span style="">&#93;</span></pre></pre><p>You can easily get all the links in the HTML with the <i>links()</i> method. It takes an optional <i>external</i> parameter which when True, returns only links to other domains/websites.</p><pre class="python">html = web.<span style="">page</span>.<span style="">parse</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;http://nodebox.net/code/index.php/About&quot;</span><span style="">&#41;</span>
<span style="color: #530035;">print</span> html.<span style="">links</span><span style="">&#40;</span><span style="">&#41;</span>
&gt;&gt;&gt; <span style="">&#91;</span>u<span style="color: #ff0080;">'http://research.nodebox.net'</span>, 
&gt;&gt;&gt;  u<span style="color: #ff0080;">'http://www.opensource.org/licenses/mit-license.php'</span>, 
&gt;&gt;&gt;  u<span style="color: #ff0080;">'http://www.python.org/'</span>, u<span style="color: #ff0080;">'http://bert.debruijn.be/kgp/'</span>, 
&gt;&gt;&gt;  u<span style="color: #ff0080;">'http://diveintopython.org/xml_processing/'</span>, 
&gt;&gt;&gt;  u<span style="color: #ff0080;">'http://processing.org'</span>, 
&gt;&gt;&gt;  u<span style="color: #ff0080;">'http://www.freelists.org/archives/the_posthumans/'</span>, 
&gt;&gt;&gt;  u<span style="color: #ff0080;">'http://research.nodebox.net'</span>
&gt;&gt;&gt; <span style="">&#93;</span></pre></pre><p>The <i>find_all()</i> method returns a list of specific tags. The <i>find()</i> method just returns the first tag: </p><pre class="python">html = web.<span style="">page</span>.<span style="">parse</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;http://nodebox.net/&quot;</span><span style="">&#41;</span>
&nbsp;
<span style="color: #530035;">print</span> html.<span style="">find</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;title&quot;</span><span style="">&#41;</span>.<span style="">string</span>
&gt;&gt;&gt; NodeBox | Home
&nbsp;
titles = html.<span style="">find_all</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;h2&quot;</span><span style="">&#41;</span>
<span style="color: #530035;">for</span> title <span style="color: #530035;">in</span> titles:
    <span style="color: #530035;">print</span> title.<span style="">string</span>
&gt;&gt;&gt; News
&gt;&gt;&gt; Current projects 
&gt;&gt;&gt; Gallery favorites
&nbsp;
content = html.<span style="">find</span><span style="">&#40;</span><span style="">id</span>=<span style="color: #ff0080;">&quot;content&quot;</span><span style="">&#41;</span>
<span style="color: #530035;">print</span> web.<span style="">html</span>.<span style="">plain</span><span style="">&#40;</span>content<span style="">&#41;</span>
&gt;&gt;&gt; Welcome to NodeBox NodeBox <span style="color: #530035;">is</span> a Mac OS X application 
&gt;&gt;&gt; that lets you create 2D visuals <span style="">&#40;</span>static, animated <span style="color: #530035;">or</span> interactive<span style="">&#41;</span> 
&gt;&gt;&gt; using Python programming <span style="">code</span> <span style="color: #530035;">and</span> export them as a PDF <span style="color: #530035;">or</span> 
&gt;&gt;&gt; a QuickTime movie. <span style="">NodeBox</span> <span style="color: #530035;">is</span> free <span style="color: #530035;">and</span> well-documented.
&gt;&gt;&gt; Read more 
&gt;&gt;&gt; 
&gt;&gt;&gt; Download NodeBox <span style="color: #530035;">for</span> Mac OS X <span style="">&#40;</span>version <span style="">1.8</span><span style="">.5</span><span style="">&#41;</span> Universal Binary
&gt;&gt;&gt; 
&gt;&gt;&gt; Latest updates:
&gt;&gt;&gt; 
&gt;&gt;&gt; * Interactivity
&gt;&gt;&gt; * Stop running scripts by hitting command-dot.
&gt;&gt;&gt; ...</pre></pre><p>As you can see you can supply tag names or attribute-value pairs to the find methods. </p><p>The <i>find()</i> and <i>find_all()</i> methods return <i>Tag</i> objects that each have <i>find()</i> and <i>find_all()</i> too. Alternatively, you can also find tags more directly, for example: <i>html.body.p</i> returns a list of all p tags.</p><pre class="python">html = web.<span style="">page</span>.<span style="">parse</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;http://nodebox.net/&quot;</span><span style="">&#41;</span>
&nbsp;
<span style="">list</span> = html.<span style="">find</span><span style="">&#40;</span><span style="">id</span>=<span style="color: #ff0080;">&quot;content&quot;</span><span style="">&#41;</span>.<span style="">find</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;ul&quot;</span><span style="">&#41;</span>
<span style="color: #530035;">print</span> web.<span style="">html</span>.<span style="">plain</span><span style="">&#40;</span><span style="">list</span><span style="">&#41;</span>
&gt;&gt;&gt; * Interactivity
&gt;&gt;&gt; * Stop running scripts by hitting command-dot.
&gt;&gt;&gt; * Transparent PDFs with the <span style="color: #530035;">background</span><span style="">&#40;</span><span style="">&#41;</span> command.
&gt;&gt;&gt; * Fast, integrated path mathematics .
&gt;&gt;&gt; * Store libaries centrally <span style="color: #530035;">in</span> the Application Support folder.
&nbsp;
<span style="color: grey;"># These statements retrieve exactly the same.</span>
<span style="">list</span> = html.<span style="">body</span><span style="">&#40;</span><span style="">id</span>=<span style="color: #ff0080;">&quot;content&quot;</span><span style="">&#41;</span><span style="">&#91;</span><span style="">0</span><span style="">&#93;</span>.<span style="">ul</span>
<span style="">list</span> = html.<span style="">body</span>.<span style="">ul</span></pre></pre><p>If you need to retrieve tags by their CSS classname, use the <i>find_class()</i> method.<br /> </p><p>To get attributes from a tag, address it as a dictionary:</p><pre class="python">html = web.<span style="">page</span>.<span style="">parse</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;http://nodebox.net/&quot;</span><span style="">&#41;</span>
html.<span style="">body</span>.<span style="">a</span><span style="">&#91;</span><span style="color: #ff0080;">&quot;href&quot;</span><span style="">&#93;</span> <span style="color: grey;"># the first link's href attribute</span>
&gt;&gt;&gt; Home</pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <hr /><p>The NodeBox Web library has various commands to clean up HTML.</p><pre class="python"><span style="color: grey;"># Replaces HTML special characters by readable characters.</span>
web.<span style="">html</span>.<span style="">replace_entities</span><span style="">&#40;</span><span style="">unicode</span>, placeholder=<span style="color: #ff0080;">&quot; &quot;</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: grey;"># Removes all tags from HTML except those in the exclude list.</span>
web.<span style="">html</span>.<span style="">strip_tags</span><span style="">&#40;</span>html, exclude=<span style="">&#91;</span><span style="">&#93;</span>, linebreaks=<span style="color: #530035;">False</span>, 
                    blocks=<span style="color: #ff0080;">&quot;<span style="">\n</span>&quot;</span>, breaks=<span style="color: #ff0080;">&quot;<span style="">\n</span>&quot;</span>, columns=<span style="color: #ff0080;">&quot;<span style="">\n</span>&quot;</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">html</span>.<span style="">strip_javascript</span><span style="">&#40;</span>html<span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">html</span>.<span style="">strip_inline_css</span><span style="">&#40;</span>html<span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">html</span>.<span style="">strip_comments</span><span style="">&#40;</span>html<span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">html</span>.<span style="">strip_forms</span><span style="">&#40;</span>html<span style="">&#41;</span></pre></pre><pre class="python"><span style="color: grey;"># If there are 10 consecutive spaces, 9 of them are removed.</span>
web.<span style="">html</span>.<span style="">collapse_spaces</span><span style="">&#40;</span><span style="">str</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: grey;"># Allow only a maximum of max linebreaks to build up.</span>
web.<span style="">html</span>.<span style="">collapse_linebreaks</span><span style="">&#40;</span><span style="">str</span>, <span style="">max</span>=<span style="">2</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: grey;"># Converts tabs to spaces, optionally leaving the left indentation unmodified.</span>
web.<span style="">html</span>.<span style="">collapse_tabs</span><span style="">&#40;</span><span style="">str</span>, indent=<span style="color: #530035;">False</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: grey;"># Combines all of the above.</span>
web.<span style="">html</span>.<span style="">plain</span><span style="">&#40;</span>html<span style="">&#41;</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <hr /><h2><a title="yahoo" name="yahoo"></a>Querying Yahoo! for links, images and news </h2><p>Before you can use the Web library to query the Yahoo! search engine, you need to obtain <b>a license key</b>: <a href="http://developer.yahoo.com/search/" target="_self">http://developer.yahoo.com/search/</a></p><p>Click&nbsp; &quot;get an application ID&quot;. Fill out the form and you&#39;ll end up with a long string of numbers and characters which is your Yahoo! license key. It entitles you to 5000 queries a day. Now register your license key in your NodeBox script:<br /></p><pre class="python">web.<span style="">yahoo</span>.<span style="">license_key</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;myID&quot;</span><span style="">&#41;</span>
<span style="color: #530035;">print</span> web.<span style="">yahoo</span>.<span style="">license_key</span><span style="">&#40;</span><span style="">&#41;</span>
&gt;&gt;&gt; myID</pre></pre><p>Note that you can query Yahoo! without setting a license key, in which case you are using a default key that you share with all the other NodeBox users who work with the Web library.</p><p>Use the <i>yahoo.search()</i>, <i>yahoo.search_images()</i> and <i>yahoo.search_news()</i> commands to query Yahoo! for links to relevant webpages/images/news:</p><pre class="python">web.<span style="">yahoo</span>.<span style="">search</span><span style="">&#40;</span>q, start=<span style="">1</span>, count=<span style="">10</span>, context=<span style="color: #530035;">None</span>, cached=<span style="color: #530035;">False</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">yahoo</span>.<span style="">search_images</span><span style="">&#40;</span>q, start=<span style="">1</span>, count=<span style="">10</span>, cached=<span style="color: #530035;">False</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">yahoo</span>.<span style="">search_news</span><span style="">&#40;</span>q, start=<span style="">1</span>, count=<span style="">10</span>, cached=<span style="color: #530035;">False</span><span style="">&#41;</span></pre></pre><p>The commands take a <i>q</i> query parameter, and optional <i>start</i>, <i>count</i> and <i>cached</i> parameters. The <i>start</i> parameter defines the first link to return, <i>count</i> defines the total amount of links to return. The <i>cached</i> parameter defines if Yahoo queries are cached locally (so they can be retrieved faster in the future). </p><pre class="python">results = web.<span style="">yahoo</span>.<span style="">search</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;nodebox&quot;</span>, start=<span style="">1</span>, count=<span style="">5</span>, cached=<span style="color: #530035;">False</span><span style="">&#41;</span>
<span style="color: #530035;">for</span> item <span style="color: #530035;">in</span> results:
    <span style="color: #530035;">print</span> item.<span style="">title</span>
&gt;&gt;&gt; NodeBox | Home 
&gt;&gt;&gt; NodeBox | Features 
&gt;&gt;&gt; visualcomplexity.<span style="">com</span> | NodeBox 
&gt;&gt;&gt; NodeBox - Wikipedia, the free encyclopedia 
&gt;&gt;&gt; Nodebox - SWiK</pre></pre><p>Each item in the list of results is a <i>YahooResult</i> object with the following properties:</p><ul><li><i>result.url</i>: the URL of the linked page</li><li><i>result.title</i>: the title of the linked page</li><li><i>result.description</i>: a short description for the page</li><li><i>result.type</i>: the <a href="http://en.wikipedia.org/wiki/Mimetype" target="_self">MIME-type</a> of the linked page</li><li><i>result.date</i>: the modification date of the linked page </li><li><i>result.width</i>: for images, the width in pixels</li><li><i>result.height</i>: for images, the height in pixels</li><li><i>result.source</i>: for news items, the source of the article</li><li><i>result.language</i>: for news items, the language used<br /></li></ul><p>The list of results has a <i>total</i> property containing the total number of results Yahoo! has for your query:</p><pre class="python"><span style="color: #530035;">print</span> results.<span style="">total</span>
&gt;&gt;&gt; <span style="">37200</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <hr /><h2><a title="yahoocontextual" name="yahoocontextual"></a>Improving Yahoo! results with a contextual search</h2><p>Suppose you are querying Yahoo! for <i>apple</i>. Most likely Yahoo! will return links to pages relating to the Apple Computer company. But perhaps you wanted links to apples as in <i>fruit</i>. The <i>yahoo.search()</i> command has an optional <i>context</i> parameter which you can supply a description of what you mean exactly with <i>apple</i>:</p><pre class="python">ctx = <span style="color: #ff0080;">''</span><span style="color: #ff0080;">'
The apple tree was perhaps the earliest tree to be cultivated, 
and apples have remained an important food in all cooler climates. 
To a greater degree than other tree fruit, except possibly citrus, 
apples store for months while still retaining their nutritive value.
We are not looking for a company named Apple.
'</span><span style="color: #ff0080;">''</span>
results = web.<span style="">yahoo</span>.<span style="">search</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;apple&quot;</span>, count=<span style="">5</span>, context=ctx<span style="">&#41;</span>
<span style="color: #530035;">print</span> r.<span style="">total</span>
<span style="color: #530035;">for</span> item <span style="color: #530035;">in</span> results:
    <span style="color: #530035;">print</span> item.<span style="">title</span>
&gt;&gt;&gt; Apple - Wikipedia, the free encyclopedia
&gt;&gt;&gt; Apple Core
&gt;&gt;&gt; Apple - Free Encyclopedia
&gt;&gt;&gt; Apple : Apple <span style="">&#40;</span>fruit<span style="">&#41;</span>
&gt;&gt;&gt; About the Apple -- Fruit</pre></pre> <p>&nbsp;</p> <hr /><h2><a title="yahoospelling" name="yahoospelling"></a>Using Yahoo! to suggest spelling corrections <br /></h2><p>To get spelling suggestions from Yahoo, use the <i>yahoo.suggest_spelling()</i> command. It returns a list of suggested spelling corrections:</p><pre class="python">corrections = web.<span style="">yahoo</span>.<span style="">suggest_spelling</span> <span style="">&#40;</span><span style="color: #ff0080;">&quot;amazoon&quot;</span>, cached=<span style="color: #530035;">False</span><span style="">&#41;</span>
<span style="color: #530035;">print</span> corrections
&gt;&gt;&gt; <span style="">&#91;</span><span style="color: #ff0080;">'amazon'</span><span style="">&#93;</span></pre></pre>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <p>&nbsp;</p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <hr /><h2><a title="yahoosort" name="yahoosort"></a>Using Yahoo! to sort associatively</h2><p>You can use Yahoo! to sort concepts according to association. Is <i>sky</i> more <i>green</i>, <i>red</i> or <i>blue</i>? </p><pre class="python">colors = <span style="">&#91;</span><span style="color: #ff0080;">&quot;green&quot;</span>, <span style="color: #ff0080;">&quot;blue&quot;</span>, <span style="color: #ff0080;">&quot;red&quot;</span><span style="">&#93;</span>
<span style="">sorted</span> = web.<span style="">yahoo</span>.<span style="">sort</span><span style="">&#40;</span>colors, <span style="color: #ff0080;">&quot;sky&quot;</span>, strict=<span style="color: #530035;">False</span>, cached=<span style="color: #530035;">True</span><span style="">&#41;</span>
<span style="color: #530035;">for</span> word, weight <span style="color: #530035;">in</span> <span style="">sorted</span>:
    <span style="color: #530035;">print</span> word, weight
&gt;&gt;&gt; blue sky <span style="">0.396039408425</span>
&gt;&gt;&gt; red sky <span style="">0.33604773392</span>
&gt;&gt;&gt; green sky <span style="">0.267912857655</span></pre></pre><p>In this example, Yahoo! is queried for <i>green sky</i>, <i>blue sky</i> and <i>red sky</i>. The result is a sorted list of (<i>query</i>, <i>weight</i>) tuples. We learn that <i>blue</i> is the color best associated with <i>sky</i>.</p><p>The <a href="Prism.html" target="_self">Prism</a> algorithm roughly works in this way. </p><p>&nbsp;</p><hr size="2" width="100%" /><h2><a title="google" name="google"></a>Querying Google</h2><p>You can run <a href="http://www.google.com" target="_self">Google</a> queries in the same way as <a href="Web.html#yahoo" target="_self">querying Yahoo!</a>. <br />The library has the following commands available:</p><pre class="python">web.<span style="">google</span>.<span style="">search</span><span style="">&#40;</span>q, start=<span style="">0</span>, cached=<span style="color: #530035;">False</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">google</span>.<span style="">search_images</span><span style="">&#40;</span>q, start=<span style="">0</span>, <span style="color: #530035;">size</span>=<span style="color: #ff0080;">&quot;&quot;</span>, cached=<span style="color: #530035;">False</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">google</span>.<span style="">search_news</span><span style="">&#40;</span>q, start=<span style="">0</span>, cached=<span style="color: #530035;">False</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">google</span>.<span style="">search_blogs</span><span style="">&#40;</span>q, start=<span style="">0</span>, cached=<span style="color: #530035;">False</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">google</span>.<span style="">sort</span><span style="">&#40;</span>words, context=<span style="color: #ff0080;">&quot;&quot;</span>, strict=<span style="color: #530035;">True</span>, cached=<span style="color: #530035;">False</span><span style="">&#41;</span></pre></pre><p>The search commands return a list of results. This list has an additional <i>total</i> property. Each item in the list is a <i>GoogleResult</i> object with the following properties:</p><ul><li><i>result.url</i>: the URL of the linked page</li><li><i>result.title</i>: the title of the linked page</li><li><i>result.description</i>: a short description for the page</li><li><i>result.date</i>: for news and blogs search</li><li><i>result.author</i>: for news and blogs search.</li><li><i>result.location</i>: for news search.</li></ul><p>Per search, a list of 8 items is returned from the given <i>start</i> item. Google will only ever return the first 32 results, so the maximum value for <i>start</i> is 24. </p><p>When searching for images, the results can be filtered for image <i>size</i> with the optional size parameter.<br /> Acceptable values are &quot;small&quot;, &quot;medium&quot;, &quot;large&quot; and &quot;wallpaper&quot;. <br /></p><p>&nbsp;</p><hr /><h2><a title="newsfeed" name="newsfeed"></a>Reading newsfeeds</h2><p>The <i>newsfeed.read()</i> command returns information from <a href="http://en.wikipedia.org/wiki/Rss" target="_self">RSS</a> or <a href="http://en.wikipedia.org/wiki/Atom_%28standard%29" target="_self">Atom</a> newsfeeds as a collection of news items with a title, link, description, and more. </p><pre class="python">web.<span style="">newsfeed</span>.<span style="">parse</span><span style="">&#40;</span>url, wait=<span style="">10</span>, cached=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><p>The returned newsfeed object has the following properties:</p><ul><li><i>newsfeed.title</i>: the title of the newsfeed<br /></li><li><i>newsfeed.description</i>: a short description for the newsfeed<br /></li><li><i>newsfeed.link</i>: a link to the homepage of the news channel<br /></li><li><i>newsfeed.date</i>: a publication date of the news channel<br /></li><li><i>newsfeed.encoding</i>: the text encoding used (usually Unicode)<br /></li><li><i>newsfeed.items</i>: a list of news items<br /></li></ul><p>The <i>items</i> property is a list in which each item object has properties of its own:</p><ul><li><i>item.title</i>: the title of the news item<br /></li><li><i>item.link</i>: a link to the full article online </li><li><i>item.description</i>: a short description of the news item </li><li><i>item.date</i>: the publication date of the news item<br /></li><li><i>item.author</i>: the author of the news item</li></ul><br /><pre class="python">newsfeed = web.<span style="">newsfeed</span>.<span style="">parse</span><span style="color: #ff0080;">&quot;http://www.whitehouse.gov/rss/news.xml&quot;</span><span style="">&#41;</span>
&nbsp;
<span style="color: #530035;">print</span> <span style="color: #ff0080;">&quot;Channel:&quot;</span>, newsfeed.<span style="">title</span>
<span style="color: #530035;">print</span> <span style="color: #ff0080;">&quot;Channel description:&quot;</span>, newsfeed.<span style="">description</span>
&nbsp;
<span style="color: #530035;">for</span> item <span style="color: #530035;">in</span> newsfeed.<span style="">items</span>:
    <span style="color: #530035;">print</span> <span style="color: #ff0080;">&quot;Title:&quot;</span>, item.<span style="">title</span>
    <span style="color: #530035;">print</span> <span style="color: #ff0080;">&quot;Link:&quot;</span>, item.<span style="">link</span>
    <span style="color: #530035;">print</span> <span style="color: #ff0080;">&quot;Description&quot;</span>, item.<span style="">description</span>    
    <span style="color: #530035;">print</span> <span style="color: #ff0080;">&quot;Date:&quot;</span>, item.<span style="">date</span>
    <span style="color: #530035;">print</span> <span style="color: #ff0080;">&quot;Author:&quot;</span>, item.<span style="">author</span></pre></pre><p><br />There are other properties as well, like <i>item.date_parsed</i>, <i>item.author_detail</i> and <i>item.author_detail.email</i>. See the <a href="http://www.feedparser.org/" target="_self">Universal Feed Parser</a> documentation for more information.</p><p>The address of some well-known newsfeeds can be found in the <i>newsfeed.favorites</i> dictionary or with the <i>newsfeed.favorite_url()</i> command: </p><pre class="python"><span style="color: #530035;">print</span> web.<span style="">newsfeed</span>.<span style="">favorite_url</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;apple&quot;</span><span style="">&#41;</span>
&gt;&gt;&gt; http://images.<span style="">apple</span>.<span style="">com</span>/main/rss/hotnews/hotnews.<span style="">rss</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <hr /><h2><a title="wikipedia" name="wikipedia"></a>Retrieving articles from Wikipedia</h2><p><a href="http://en.wikipedia.org/" target="_self">Wikipedia</a> is a multilingual, web-based, free content encyclopedia project. Wikipedia is written collaboratively by volunteers; the vast majority of its articles can be edited by anyone with access to the Internet. </p><p>The <i>wikipedia.search() </i>command retrieves articles from Wikipedia. It parses an article corresponding to the given query into lists of related articles and paragraphs of plain text without any HTML or other markup in it:</p><pre class="python">web.<span style="">wikipedia</span>.<span style="">search</span><span style="">&#40;</span>q, language=<span style="color: #ff0080;">&quot;en&quot;</span>, light=<span style="color: #530035;">False</span>, wait=<span style="">10</span>, cached=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><p>The command takes a <i>q</i> query parameter and, optionally, the <i>language</i> the article should be written in. When <i>light</i> is True, only a <i>title</i>, <i>links</i> to other articles, <i>categories</i> and <i>disambiguation</i> will be parsed from the article (it&#39;s faster than a full parse). </p><p>Note that the <i>q</i> parameter is case-insenstive - this gives the best chance of retrieving an article. <br />If you do want case-sensitivity use <i>search(q, case_sensitive=True)</i>.<i> </i> </p><p>The return value is an article object with the following properties:</p><ul><li><i>article.title</i>: the title of the article<br /></li><li><i>article</i><i>.links</i>: a list of titles of related articles</li><li><i>article</i><i>.categories</i>: a list of categories this article belongs to<br /></li><li><i>article</i><i>.disambiguation</i>: a list of article titles describing other interpretations of the query </li><li><i>article</i><i>.paragraphs</i>: a list of paragraph objects (<i>WikipediaParagraph</i>)<br /></li><li><i>article</i><i> .images</i>: a list of image objects (<i>WikipediaImage</i>)</li><li><i>article</i><i>.tables</i>: a list of table objects (<i>WikipediaTable</i>)</li><li><i>article</i><i>.references</i>: a list of reference objects (<i>WikipediaReference</i>) </li><li><i>article</i><i>.translations</i>: a dictionary of language keys linking to title translations<br /></li><li><i>article</i><i>.important</i>: important phrases that appear in bold in the online article<br /></li><li><i>article</i><i>.markup</i>: the source text of the article in <a href="http://www.mediawiki.org/wiki/MediaWiki" target="_self">MediaWiki</a> markup</li></ul><p>&nbsp;</p><hr /><p><span class="grey_box">Article links</span><b> </b></p><p>Each of the titles in the <i>article.links</i> list can be supplied to <i>wikipedia.search()</i> to get more information on that topic.</p><pre class="python">article = web.<span style="">wikipedia</span>.<span style="">search</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;nodebox&quot;</span><span style="">&#41;</span>
<span style="color: #530035;">print</span> article.<span style="">title</span>
<span style="color: #530035;">print</span> article.<span style="">links</span>
&gt;&gt;&gt; NodeBox
&gt;&gt;&gt; <span style="">&#91;</span>u<span style="color: #ff0080;">'2007'</span>, u<span style="color: #ff0080;">'2D computer graphics'</span>, u<span style="color: #ff0080;">'Adobe Photoshop'</span>, u<span style="color: #ff0080;">'Animation'</span>,
&gt;&gt;&gt;  u<span style="color: #ff0080;">'CMYK'</span>, u<span style="color: #ff0080;">'Computer animation'</span>, u<span style="color: #ff0080;">'Core Image'</span>, u<span style="color: #ff0080;">'DrawBot'</span>, 
&gt;&gt;&gt;  u<span style="color: #ff0080;">'February 27'</span>, u<span style="color: #ff0080;">'Graphic design'</span>, u<span style="color: #ff0080;">'HSV color space'</span>, 
&gt;&gt;&gt;  u<span style="color: #ff0080;">'MIT License'</span>, u<span style="color: #ff0080;">'Mac OS X'</span>, u<span style="color: #ff0080;">'OpenGL'</span>, u<span style="color: #ff0080;">'Portable Document Format'</span>, 
&gt;&gt;&gt;  u<span style="color: #ff0080;">'PostScript'</span>, u<span style="color: #ff0080;">'Processing (programming language)'</span>, 
&gt;&gt;&gt;  u<span style="color: #ff0080;">'Python (programming language)'</span>, u<span style="color: #ff0080;">'QuickTime'</span>, u<span style="color: #ff0080;">'RGB'</span>, u<span style="color: #ff0080;">'SVG'</span>, 
&gt;&gt;&gt;  u<span style="color: #ff0080;">'WordNet'</span>, u<span style="color: #ff0080;">'alpha transparency'</span>, u<span style="color: #ff0080;">'artificial intelligence'</span>, 
&gt;&gt;&gt;  u<span style="color: #ff0080;">'collage'</span>, u<span style="color: #ff0080;">'graphic design'</span>
&gt;&gt;&gt; <span style="">&#93;</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <hr /><p><span class="grey_box">Article paragraphs</span><b> </b></p><p>Each paragraph object in <i>article.paragraphs</i>&nbsp; is a list of plain text blocks. Furthermore, a paragraph has a number of&nbsp; properties. This code snippet loops through all the paragraphs: </p><pre class="python">article = web.<span style="">wikipedia</span>.<span style="">search</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;nodebox&quot;</span><span style="">&#41;</span>
<span style="color: #530035;">for</span> paragraph <span style="color: #530035;">in</span> article.<span style="">paragraphs</span>:    
    <span style="color: grey;"># A paragraph's depth determines</span>
    <span style="color: grey;"># if it's a subparagraph or a top-level paragraph.</span>
    <span style="color: #530035;">if</span> paragraph.<span style="">depth</span> &lt;= <span style="">1</span>:
        <span style="color: #530035;">print</span> <span style="color: #ff0080;">&quot;=&quot;</span>*<span style="">100</span>
    <span style="color: #530035;">else</span>:
        <span style="color: #530035;">print</span> <span style="color: #ff0080;">&quot;-&quot;</span>*<span style="">100</span>
    <span style="color: #530035;">print</span> paragraph.<span style="">title</span> + <span style="color: #ff0080;">&quot;<span style="">\n</span>&quot;</span>
    <span style="color: grey;"># Each paragraph is a list of separate blocks of text:</span>
    <span style="color: #530035;">for</span> textblock <span style="color: #530035;">in</span> paragraph:
        <span style="color: #530035;">print</span> textblock + <span style="color: #ff0080;">&quot;<span style="">\n</span>&quot;</span></pre></pre><p>To display a paragraph with the <a href="Reference_|_text().html" target="_self">text()</a> command you can loop over all the textblocks individually: </p><pre class="python"><span style="color: #530035;">fontsize</span><span style="">&#40;</span><span style="">10</span><span style="">&#41;</span>
x, y, w = <span style="">20</span>, <span style="">20</span>, <span style="">300</span>
<span style="color: #530035;">for</span> textblock <span style="color: #530035;">in</span> article.<span style="">paragraphs</span><span style="">&#91;</span><span style="">0</span><span style="">&#93;</span>:
    <span style="color: #530035;">text</span><span style="">&#40;</span>textblock, x, y, width=w<span style="">&#41;</span>
    y += <span style="color: #530035;">textheight</span><span style="">&#40;</span>textblock, width=w<span style="">&#41;</span> + <span style="">10</span></pre></pre><p>Or simply use the Python <i>str()</i> command on the entire list: </p><pre class="python"><span style="color: #530035;">text</span><span style="">&#40;</span><span style="">str</span><span style="">&#40;</span>article.<span style="">paragraphs</span><span style="">&#91;</span><span style="">0</span><span style="">&#93;</span><span style="">&#41;</span>, <span style="">20</span>, <span style="">20</span>, width=<span style="">300</span><span style="">&#41;</span></pre></pre><p>A paragraph object has the following properties:</p><ul><li><i>paragraph.title</i>: the title or heading of this paragraph<br /></li><li><i>paragraph.depth</i>: the depth of the paragraph<br /></li><li><i>paragraph.parent</i>: a <i>WikipediaParagraph </i>object containing this subparagraph </li><li><i>paragraph.children</i>: a list of sub-<i>WikipediaParagraph</i> objects</li><li><i>paragraph.main</i>: a list of article titles whose contents describe this paragraph in detail</li><li><i>paragraph.related</i>: more article titles that have related contents</li><li><i>paragraph.tables</i>: a list of <i>WikipediaTable </i>objects found in this paragraph<br /></li></ul><p>&nbsp;</p><hr /><p><span class="grey_box">Article images</span> </p><p>Image objects in the <i>article.images</i> list have properties (like a description) that can help in discerning what is being displayed in the image:</p><pre class="python">article = web.<span style="">wikipedia</span>.<span style="">search</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;computer&quot;</span><span style="">&#41;</span>
<span style="color: #530035;">for</span> img <span style="color: #530035;">in</span> article.<span style="">images</span>:
    <span style="color: #530035;">print</span> img.<span style="">description</span>
&gt;&gt;&gt; The NASA Columbia Supercomputer.
&gt;&gt;&gt; A computer <span style="color: #530035;">in</span> a wristwatch.
&gt;&gt;&gt; The Jacquard loom was one of the first programmable devices.
&gt;&gt;&gt; ...</pre></pre><p>An image object has the following properties:</p><ul><li><i>image.path</i>: the image&#39;s filename</li><li><i>image.description</i>: a description parsed from the source content</li><li><i>image.links</i>: a list of related article titles</li><li><i>image properties</i>: a list of properties parsed from the source (e.g. <i>left</i>, <i>thumb</i>, ...) <br /></li></ul><p><br />Finally, here is a little web mash-up to draw article images in NodeBox: </p><pre class="python"><span style="color: grey;"># 1) Get the image filename from the article.</span>
article = web.<span style="">wikipedia</span>.<span style="">search</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;computer&quot;</span><span style="">&#41;</span>
img = article.<span style="">images</span><span style="">&#91;</span><span style="">0</span><span style="">&#93;</span>
&nbsp;
<span style="color: grey;"># 2) Get the HTML for the Wikipedia page displaying the full-size image</span>
img = img.<span style="">path</span>.<span style="">replace</span><span style="">&#40;</span><span style="color: #ff0080;">&quot; &quot;</span>, <span style="color: #ff0080;">&quot;_&quot;</span><span style="">&#41;</span>
html = web.<span style="">page</span>.<span style="">parse</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;http://en.wikipedia.org/wiki/Image:&quot;</span>+img<span style="">&#41;</span>
&nbsp;
<span style="color: grey;"># 3) Find the link in the HTML pointing to the image file.</span>
<span style="color: #530035;">for</span> a <span style="color: #530035;">in</span> html.<span style="">find_all</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;a&quot;</span><span style="">&#41;</span>:
    <span style="color: #530035;">if</span> a.<span style="">has_key</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;href&quot;</span><span style="">&#41;</span> <span style="color: #530035;">and</span> a<span style="">&#91;</span><span style="color: #ff0080;">&quot;href&quot;</span><span style="">&#93;</span>.<span style="">endswith</span><span style="">&#40;</span>img<span style="">&#41;</span>:
        img = a<span style="">&#91;</span><span style="color: #ff0080;">&quot;href&quot;</span><span style="">&#93;</span>
        <span style="color: #530035;">break</span>
&nbsp;
<span style="color: grey;"># 4) Download the image link.</span>
<span style="color: grey;">#    Pass the downloaded data to the image() command.</span>
img = web.<span style="">download</span><span style="">&#40;</span>img<span style="">&#41;</span>
<span style="color: #530035;">image</span><span style="">&#40;</span><span style="color: #530035;">None</span>, <span style="">0</span>, <span style="">0</span>, data=img<span style="">&#41;</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <p><img src="http://nodebox.net/code/data/media/web-wikipedia1.jpg" alt="web-wikipedia1" /> <br /></p><p>&nbsp;</p><hr /><p><span class="grey_box">Article tables</span><br /></p><p>Tables parsed from an article can be accessed from the <i>article.tables</i> list or from <i>article.paragraph[i].tables</i>. A table object is a list of rows. Each row is a list of cells:</p><pre class="python">article = web.<span style="">wikipedia</span>.<span style="">search</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;computer&quot;</span><span style="">&#41;</span>
table = article.<span style="">tables</span><span style="">&#91;</span><span style="">0</span><span style="">&#93;</span>
<span style="color: #530035;">print</span> table.<span style="">paragraph</span>.<span style="">title</span>
<span style="color: #530035;">print</span> table.<span style="">title</span>, <span style="color: #ff0080;">&quot;(&quot;</span>+table.<span style="">properties</span>+<span style="color: #ff0080;">&quot;)&quot;</span>
<span style="color: #530035;">for</span> row <span style="color: #530035;">in</span> table:
    <span style="color: #530035;">print</span> <span style="color: #ff0080;">&quot;-&quot;</span>*<span style="">50</span>
    <span style="color: #530035;">print</span> row.<span style="">properties</span>
    <span style="color: #530035;">for</span> cell <span style="color: #530035;">in</span> row:
        <span style="color: #530035;">print</span> cell, <span style="color: #ff0080;">&quot;(&quot;</span>+cell.<span style="">properties</span>+<span style="color: #ff0080;">&quot;)&quot;</span></pre></pre><p>As you can see, tables, rows and cells all have <i>properties.</i> Tables also have a <i>title</i> property and a <i>paragraph</i> property linking to the paragraph object in which this table was found.</p><p>&nbsp;</p><hr /><p><span class="grey_box">Article references</span><br /></p><p>Text blocks in a Wikipedia paragraph can contain numerous references to websites, journal and footnotes. They are marked as a number between square brackets, e.g. [15]. </p><p>For example:</p><pre class="python">&gt;&gt;&gt; A key component common to all CPUs <span style="color: #530035;">is</span> the program counter, 
&gt;&gt;&gt; a special memory cell <span style="">&#40;</span>a register<span style="">&#41;</span> that keeps track of which 
&gt;&gt;&gt; location <span style="color: #530035;">in</span> memory the next instruction <span style="color: #530035;">is</span> to be read <span style="color: #530035;">from</span>. <span style="">&#91;</span><span style="">11</span><span style="">&#93;</span></pre></pre><p>corresponds to <i>article.references[10]</i> - keeping in mind that list indices start from 0:</p><pre class="python"><span style="color: #530035;">print</span> article.<span style="">references</span><span style="">&#91;</span><span style="">10</span><span style="">&#93;</span>
&gt;&gt;&gt; Instructions often occupy more than one memory address, 
&gt;&gt;&gt; so the program counters usually increases by the number of 
&gt;&gt;&gt; memory locations required to store one instruction</pre></pre><p>Each reference object in the <i>article.references</i> list has a number of properties. In the worst case all of the information is stored in <i>reference.note</i>, in the best case the reference has data for all of the folllowing properties:</p><ul><li><i>reference.title</i>: a title of a publication<br /></li><li><i>reference.url</i>: a link to a web page<br /></li><li><i>reference.author</i>: the author of a publication<br /></li><li><i>reference.first</i>: the author&#39;s first name<br /></li><li><i>reference.last</i>: the author&#39;s last name</li><li><i>reference.journal</i>: the journal in which the article is published</li><li><i>reference.publisher</i>: the journal&#39;s publisher </li><li><i>reference.date</i>: publication date<br /> </li><li><i>reference.year</i>: publication year<br /> </li><li><i>reference.id</i>: an ISBN book number </li><li><i>reference.note</i>: footnotes and descriptions </li></ul><p>&nbsp;</p><hr /><p><span class="grey_box">Article translations</span> </p><p>Here&#39;s an example script how to get the translated version of an article:</p><pre class="python">article = web.<span style="">wikipedia</span>.<span style="">search</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;computer&quot;</span><span style="">&#41;</span>
language = <span style="color: #ff0080;">&quot;fr&quot;</span>
<span style="color: #530035;">if</span> article.<span style="">translations</span>.<span style="">has_key</span><span style="">&#40;</span>language<span style="">&#41;</span>:
    translation = article.<span style="">translations</span><span style="">&#91;</span>language<span style="">&#93;</span>
    article = web.<span style="">wikipedia</span>.<span style="">search</span><span style="">&#40;</span>translation, language<span style="">&#41;</span>
    <span style="color: #530035;">print</span> article.<span style="">title</span> 
&gt;&gt;&gt; Ordinateur</pre></pre><p>The dictionary of all languages used in Wikipedia:</p><pre class="python"><span style="color: #530035;">print</span> web.<span style="">wikipedia</span>.<span style="">languages</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <hr /><h2><a title="wikipediahelpers" name="wikipediahelpers"></a>Some helper commands to draw Wikipedia content in NodeBox </h2><p>A number of commands in the library can help you find out how to display content from Wikipedia in NodeBox. There are commands to draw lists, math equations and tables. </p><pre class="python"><span style="color: grey;"># Returns True if a given text block str in a paragraph </span>
<span style="color: grey;"># is preformatted text, e.g. a programming code example.</span>
web.<span style="">wikipedia</span>.<span style="">is_preformatted</span><span style="">&#40;</span><span style="">str</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: grey;"># Returns True if a text block in a paragraph is a (numbered) list.</span>
web.<span style="">wikipedia</span>.<span style="">is_list</span><span style="">&#40;</span><span style="">str</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: grey;"># Returns True if a text block in a paragraph is a math equation.</span>
web.<span style="">wikipedia</span>.<span style="">is_math</span><span style="">&#40;</span><span style="">str</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: grey;"># Draws a list text block at x, y coordinates in NodeBox.</span>
web.<span style="">wikipedia</span>.<span style="">draw_list</span><span style="">&#40;</span><span style="">str</span>, x, y, w, padding=<span style="">5</span>, callback=<span style="color: #530035;">None</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: grey;"># Use mimeTeX to draw an image of a math equation at x, y.</span>
web.<span style="">wikipedia</span>.<span style="">draw_math</span><span style="">&#40;</span><span style="">str</span>, x, y, alpha=<span style="">1.0</span><span style="">&#41;</span></pre></pre><pre class="python"><span style="color: grey;"># Draws WikipediaTable object in NodeBox; works very poorly.</span>
web.<span style="">wikipedia</span>.<span style="">draw_table</span><span style="">&#40;</span>table, x, y, w, padding=<span style="">5</span><span style="">&#41;</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <p><img src="http://nodebox.net/code/data/media/web_wikipedia2.jpg" alt="web_wikipedia2" /></p><p>&nbsp;</p>&nbsp;&nbsp;&nbsp; <hr /><h2><a title="morguefile" name="morguefile"></a>Querying morgueFile for images </h2><p><a href="http://www.morguefile.com" target="_self">morgueFile</a> contains photographs freely contributed by many artists to be used in creative projects by visitors to the site. </p><p>The <i>morguefile.search()</i> command returns a list of images on morgueFile that correspond to a given query. It has an optional parameter <i>max</i> specifying the maximum number of images to return:</p><pre class="python">web.<span style="">morguefile</span>.<span style="">search</span><span style="">&#40;</span>q, <span style="">max</span>=<span style="">100</span>, wait<span style="">-10</span>, cached=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">morguefile</span>.<span style="">search_by_author</span><span style="">&#40;</span>q, <span style="">max</span>=<span style="">100</span>, wait=<span style="">10</span>, cached=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><p>Each image object in the returned list has the following properties:</p><ul><li><i><i>img</i>.id</i>: the unique morgueFile ID for the image</li><li><i><i>img</i>.category</i>: the category the image belongs to</li><li><i><i>img</i>.author</i>: the name of the author</li><li><i><i>img</i>.name</i>: the image&#39;s name</li><li><i><i>img</i>.url</i>: the URL of the image thumbnail<br /><i>img.width</i>: the image width in pixels</li><li><i>img.height</i>: the image height in pixels</li><li><i><i>img</i>.date</i>: the date the image was added to morgueFile</li></ul><br /><pre class="python">images = web.<span style="">morguefile</span>.<span style="">search</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;leaf&quot;</span>, <span style="">max</span>=<span style="">10</span><span style="">&#41;</span>
<span style="color: #530035;">for</span> img <span style="color: #530035;">in</span> images:
    <span style="color: #530035;">print</span> img.<span style="">name</span>, img.<span style="">views</span>
&gt;&gt;&gt; IMG_1662_d.<span style="">JPG</span> 
&gt;&gt;&gt; fedegrafo_100_0221.<span style="">jpg</span> 
&gt;&gt;&gt; cha827.<span style="">jpg</span> 
&gt;&gt;&gt; Filiford_P1010003.<span style="">JPG</span> 
&gt;&gt;&gt; IMG_8336.<span style="">jpg</span> 
&gt;&gt;&gt; CIMG0012_s.<span style="">JPG</span> 
&gt;&gt;&gt; Target_spot_disease_on_maple.<span style="">JPG</span> 
&gt;&gt;&gt; IMG_1664.<span style="">JPG</span> 
&gt;&gt;&gt; bumpy_leaf.<span style="">JPG</span> 
&gt;&gt;&gt; Aztec_Grass.<span style="">JPG</span></pre></pre><p>Each image object in the list has a <i>download()</i> method that stores the image file locally in cache. It has an optional parameter <i>size</i>, which can be set to &quot;small&quot; (image thumbnail) or &quot;large&quot; (default):</p><pre class="python">img = images<span style="">&#91;</span><span style="">0</span><span style="">&#93;</span>
img.<span style="">download</span><span style="">&#40;</span><span style="color: #530035;">size</span>=<span style="color: #ff0080;">&quot;large&quot;</span>, wait=<span style="">60</span><span style="">&#41;</span>
<span style="color: #530035;">image</span><span style="">&#40;</span>img.<span style="">path</span>, <span style="">0</span>, <span style="">0</span>, width=img.<span style="">width</span>, height=img.<span style="">height</span><span style="">&#41;</span>
<span style="color: #530035;">print</span> img.<span style="">author</span>, img.<span style="">path</span>
&gt;&gt;&gt; Filiford cache/morguefile/240060eb1e1a0628ae32aff811b167ef.<span style="">JPG</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <p><img src="http://nodebox.net/code/data/media/web_morguefile2.jpg" alt="web_morguefile2" /></p><p>&nbsp;</p><hr size="2" width="100%" /><h2><a name="flickr" title="flickr"></a>Querying Flickr for images</h2><p><a href="http://www.flickr.com" target="_self">Flickr</a> is an online photo management and sharing application. <br />You can query it for images in the same way as <a href="Web.html#morguefile" target="_self">querying morgueFile</a>. </p><pre class="python">web.<span style="">flickr</span>.<span style="">search</span><span style="">&#40;</span>q, start=<span style="">1</span>, count=<span style="">100</span>, wait=<span style="">10</span>, cached=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">flickr</span>.<span style="">recent</span><span style="">&#40;</span>start=<span style="">1</span>, count=<span style="">100</span>, wait=<span style="">10</span>, cached=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><p>The <i>flickr.search() </i>command has two optional parameters: <i>sort</i> and <i>match</i>. The sort order can be set either to &quot;interest&quot;, &quot;relevance&quot; (default) or &quot;date&quot;. The <i>match</i> parameter can be either &quot;all&quot; (image tags must include all of the search words) or &quot;any&quot; (default).</p><p>Each image object in the returned list has a <i>download()</i> method like the morgueFile interface. The <i>download()</i> method has an optional <i>size</i> parameter which can be &quot;square&quot;, &quot;small&quot;, &quot;medium&quot;, &quot;large&quot; and &quot;wallpaper&quot;. This way you can specify the size of the image to download.<br /></p><p>&nbsp;</p><hr /><h2><a title="kuler" name="kuler"></a>Querying kuler for color themes</h2><p><a href="http://kuler.adobe.com/" target="_self">kuler</a> is an Adobe web-application that allows users to construct and share color themes.</p><p>The <i>kuler.search()</i> command returns a list of color themes on kuler that correspong to a given query. It has an optional <i>page</i> parameter defining the starting page (each page has 30 themes).</p><pre class="python">web.<span style="">kuler</span>.<span style="">search</span><span style="">&#40;</span>q, page=<span style="">0</span>, wait=<span style="">10</span>, cached=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">kuler</span>.<span style="">search_by_id</span><span style="">&#40;</span><span style="">id</span>, page=<span style="">0</span>, wait=<span style="">10</span>, cached=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">kuler</span>.<span style="">search_by_popularity</span><span style="">&#40;</span>page=<span style="">0</span>, wait=<span style="">10</span>, cached=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">kuler</span>.<span style="">search_by_rating</span><span style="">&#40;</span>page=<span style="">0</span>, wait=<span style="">10</span>, cached=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><p>Each theme object in the returned list has the following properties: </p><ul><li><i>theme.id</i>: the unique kuler id for the theme</li><li><i>theme.author</i>: the name of the author<br /></li><li><i>theme.label</i>: the title of the theme<br /></li><li><i>theme.tags</i>: a list of keywords for a theme found with <i>kuler.search_by_id()</i>&nbsp; </li><li><i>theme.darkest</i>: a tuple of (R, G, B) values for the darkest color in the theme<br /></li><li><i>theme.lightest</i>: a tuple of (R, G, B) values the lightest color in the theme<br /></li></ul><p>You can loop through a theme object as a list. Each item in the theme is a tuple of (R, G, B) values, which you can supply to <a href="Reference_|_fill().html" target="_self">fill()</a> or <a href="Reference_|_stroke().html" target="_self">stroke()</a> in NodeBox. </p><pre class="python">themes = web.<span style="">kuler</span>.<span style="">search</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;banana&quot;</span><span style="">&#41;</span>
<span style="color: #530035;">for</span> r, g, b <span style="color: #530035;">in</span> themes<span style="">&#91;</span><span style="">0</span><span style="">&#93;</span>:
    <span style="color: #530035;">print</span> r, g, b
&nbsp;
<span style="color: grey;"># The kuler.preview() command gives you an idea of the theme's colors. </span>
web.<span style="">kuler</span>.<span style="">preview</span><span style="">&#40;</span>themes<span style="">&#91;</span><span style="">0</span><span style="">&#93;</span><span style="">&#41;</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <p><img src="http://nodebox.net/code/data/media/web_kuler1.jpg" alt="web_kuler1" /> <br /></p><p>&nbsp;</p><p> Each theme also has a draw() method that displays the colors in the theme in NodeBox:</p><pre class="python">themes = web.<span style="">kuler</span>.<span style="">search</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;banana&quot;</span><span style="">&#41;</span>
themes<span style="">&#91;</span><span style="">0</span><span style="">&#93;</span>.<span style="">draw</span><span style="">&#40;</span><span style="">50</span>, <span style="">50</span>, w=<span style="">40</span>, h=<span style="">120</span><span style="">&#41;</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <p><img src="http://nodebox.net/code/data/media/web_kuler2.jpg" alt="web_kuler2" /> <br /></p><p>&nbsp;</p><hr size="2" width="100%" /><h2><a name="colr" title="colr"></a>Querying Colr for color themes<br /></h2><p><a href="http://www.colr.org" target="_self">Colr</a> is an online tool by Lloyd Dalton to let people fiddle around with colors. <br />You can query it for color themes in the same way as querying <a href="Web.html#kuler" target="_self">kuler</a>.</p><pre class="python">web.<span style="">colr</span>.<span style="">search</span><span style="">&#40;</span>q, page=<span style="">0</span>, wait=<span style="">10</span>, cached=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">colr</span>.<span style="">search_by_id</span><span style="">&#40;</span><span style="">id</span>, page=<span style="">0</span>, wait=<span style="">10</span>, cached=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">colr</span>.<span style="">latest</span><span style="">&#40;</span>page=<span style="">0</span>, wait=<span style="">10</span>, cached=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">colr</span>.<span style="color: #530035;">random</span><span style="">&#40;</span>page=<span style="">0</span>, wait=<span style="">10</span>, cached=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><p>You can manipulate each theme object in the returned list as with the kuler interface.<br /></p><p>&nbsp;</p><hr /><h2><a title="math" name="math"></a> Creating PNG or GIF images from math equations</h2><p>John Forkosh has a <a href="http://www.forkosh.com/mathtex.html" target="_self">mathTeX server</a> that creates PNG or GIF images from math equations. </p><pre class="python">web.<span style="">mathtext</span>.<span style="">png</span><span style="">&#40;</span>equation, dpi=<span style="">120</span>, <span style="color: #530035;">color</span>=<span style="color: #ff0080;">&quot;&quot;</span><span style="">&#41;</span></pre></pre><pre class="python">web.<span style="">mathtext</span>.<span style="">gif</span><span style="">&#40;</span>equation, dpi=<span style="">120</span>, <span style="color: #530035;">color</span>=<span style="color: #ff0080;">&quot;&quot;</span><span style="">&#41;</span></pre></pre><p>The optional<i> dpi </i>parameter sets the image resolution, while <i>color</i> can be the name of a primary color (e.g. blue, green, red, ...)</p><pre class="python">equation = r<span style="color: #ff0080;">&quot;E = hf = <span style="">\f</span>rac{hc}{<span style="">\l</span>ambda} <span style="">\,</span><span style="">\!</span> &quot;</span>
img = web.<span style="">mathtex</span>.<span style="">gif</span><span style="">&#40;</span>equation<span style="">&#41;</span>
<span style="color: #530035;">image</span><span style="">&#40;</span>img, <span style="">0</span>, <span style="">0</span><span style="">&#41;</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <p><img src="http://nodebox.net/code/data/media/web_mimetex1.jpg" alt="web_mimetex1" /></p><p>&nbsp;</p><hr /><h2><a title="urbandictionary" name="urbandictionary"></a>Word definitions from Urban Dictionary <br /></h2><p><a href="http://www.urbandictionary.com" target="_self">Urban Dictionary</a> is a slang dictionary with user-defined description for words. You can often get some humorous (or cruel and childish) results from it.</p><p>The <i>urbandictionary.search()</i> command returns a list of definitions for a given word.</p><pre class="python">web.<span style="">urbandictionary</span>.<span style="">search</span><span style="">&#40;</span>q, cached=<span style="color: #530035;">True</span><span style="">&#41;</span></pre></pre><p>Each definition object in the returned list has the following properties: </p><ul><li><i>definition.description</i>: a description of the given word</li><li><i>definition.example</i>: example usage of the word in a sentence</li><li><i>definition.author</i>: the author who came up with the definition</li><li><i>definition.links</i>: a list of words linked to the definition</li><li><i>definition.url</i>: the web page where the definition can be found</li></ul><pre class="python">definitions = web.<span style="">urbandictionary</span>.<span style="">search</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;life&quot;</span><span style="">&#41;</span>
<span style="color: #530035;">print</span> definitions<span style="">&#91;</span><span style="">0</span><span style="">&#93;</span>.<span style="">description</span>
&gt;&gt;&gt; A sexually-transmitted, terminal disease.</pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <hr /><h2><a title="asynchronous" name="asynchronous"></a>Working with asynchronous downloads </h2><p>Downloading content from the internet may take a moment to complete. When running an animation in NodeBox, you don&#39;t want it to halt while NodeBox waits for the download to complete. The Web library offers you the capability to download <i>asynchronously</i>. N<b>odeBox will then continue running with the download taking place in the background memory</b>. Once it is done you can start manipulating the retrieved data. </p><p>The <i>url.retrieve()</i> command has some optional parameters to do asynchronous downloads:</p><pre class="python">web.<span style="">url</span>.<span style="">retrieve</span><span style="">&#40;</span>url, wait=<span style="">60</span>, asynchronous=<span style="color: #530035;">False</span>, cache=<span style="color: #530035;">None</span>, <span style="">type</span>=<span style="color: #ff0080;">&quot;.html&quot;</span><span style="">&#41;</span></pre></pre><p>With <i>asynchronous</i> set to True, the download will occur in the background. The returned object has a <i>done</i> property which is True when downloading has terminated. The object&#39;s <i>data</i> property then contains the source data. </p><p>You can also set a <i>wait</i> amount of seconds that is the maximum amount of time NodeBox will connect to the internet. When the limit is exceeded and no data was fully recovered, the returned object will have an <i>error</i> property set. When something else went wrong <i>error</i> will be set as well by the way, usually with a <i>URLTimeout</i>, a <i>HTTPError</i> or a <i>HTTP404NotFound</i> exception.&nbsp; </p><pre class="python">data = web.<span style="">url</span>.<span style="">retrieve</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;http://nodebox.net&quot;</span>, asynchronous=<span style="color: #530035;">True</span><span style="">&#41;</span>
<span style="color: #530035;">import</span> <span style="">time</span>
<span style="color: #530035;">while</span> <span style="color: #530035;">not</span> data.<span style="">done</span>:
    <span style="">time</span>.<span style="">sleep</span><span style="">&#40;</span><span style="">0.1</span><span style="">&#41;</span>
    <span style="color: #530035;">print</span> <span style="color: #ff0080;">&quot;downloading...&quot;</span>
<span style="color: #530035;">print</span> <span style="color: #ff0080;">&quot;done!&quot;</span>
&gt;&gt;&gt; downloading...
&gt;&gt;&gt; downloading...
&gt;&gt;&gt; downloading...
&gt;&gt;&gt; downloading...
&gt;&gt;&gt; done!</pre></pre><p>Since all of the services in the Web library build upon <i>url.retrieve()</i>, you can also use the <i>asynchronous</i> parameter with <i>page.parse()</i>, <i>yahoo.search()</i>, <i>newsfeed.parse()</i>, <i>wikipedia.search()</i>, <i>morguefile.search()</i>, <i>morguefile_image.download()</i> and <i>kuler.search()</i>. </p><p>An exception is the Urban Dictionary which uses SOAP instead of <i>url.retrieve()</i>. </p><p>Here&#39;s a quick mash-up of an interactive link browser. It starts out with some links from Yahoo! and when you click on a link, it displays the links in that web page, and so on.</p><pre class="python"><span style="color: #530035;">from</span> <span style="">math</span> <span style="color: #530035;">import</span> sin
<span style="color: #530035;">import</span> web
&nbsp;
<span style="color: grey;"># Get links from Yahoo!</span>
links = web.<span style="">yahoo</span>.<span style="">search</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;nodebox&quot;</span><span style="">&#41;</span>
from_yahoo = <span style="color: #530035;">True</span>
retrieving = <span style="color: #530035;">None</span>
&nbsp;
<span style="color: #530035;">speed</span><span style="">&#40;</span><span style="">20</span><span style="">&#41;</span>
<span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>draw</span><span style="">&#40;</span><span style="">&#41;</span>:
    
    <span style="color: #530035;">global</span> links, from_yahoo, retrieving
    
    <span style="color: #530035;">background</span><span style="">&#40;</span><span style="">0.2</span>, <span style="">0.2</span>, <span style="">0.15</span><span style="">&#41;</span>
    y = <span style="">100</span>
    <span style="color: #530035;">fontsize</span><span style="">&#40;</span><span style="">15</span><span style="">&#41;</span>
    
    <span style="color: grey;"># Traverse the current list of links.</span>
    <span style="color: #530035;">for</span> link <span style="color: #530035;">in</span> links:
        
        <span style="color: grey;"># Wave each line of text horizontally.</span>
        x = <span style="">100</span> + sin<span style="">&#40;</span>FRAME*y/<span style="">5000.0</span><span style="">&#41;</span>*<span style="">50</span>
        
        <span style="color: grey;"># Yahoo!, our starting point,</span>
        <span style="color: grey;"># has links in a slightly different format.</span>
        <span style="color: #530035;">if</span> from_yahoo:
            link = link.<span style="">url</span>
        
        <span style="color: grey;"># A link looks grey by default...</span>
        <span style="color: #530035;">fill</span><span style="">&#40;</span><span style="">0.8</span><span style="">&#41;</span>
        
        <span style="color: grey;"># unless the mouse is hovering over it...</span>
        <span style="color: #530035;">if</span> x &lt; MOUSEX &lt; x+<span style="color: #530035;">textwidth</span><span style="">&#40;</span>link<span style="">&#41;</span> <span style="color: #530035;">and</span> \
           y-<span style="color: #530035;">fontsize</span><span style="">&#40;</span><span style="">&#41;</span> &lt; MOUSEY &lt; y:
            <span style="color: grey;"># in which case it is pink.</span>
            <span style="color: #530035;">fill</span><span style="">&#40;</span><span style="">1</span>, <span style="">0</span>, <span style="">0.5</span><span style="">&#41;</span>
            <span style="color: grey;"># When the mouse is pressed on a link</span>
            <span style="color: grey;"># and we are not downloading anything,</span>
            <span style="color: grey;"># start a download of the link in the background.</span>
            <span style="color: #530035;">if</span> mousedown <span style="color: #530035;">and</span> retrieving == <span style="color: #530035;">None</span>:
                retrieving = web.<span style="">page</span>.<span style="">parse</span><span style="">&#40;</span>link, asynchronous=<span style="color: #530035;">True</span><span style="">&#41;</span>
        
        <span style="color: grey;"># Draw the link to the screen.</span>
        <span style="color: #530035;">text</span><span style="">&#40;</span>link, x, y<span style="">&#41;</span>
        y += <span style="color: #530035;">fontsize</span><span style="">&#40;</span><span style="">&#41;</span> * <span style="">1.5</span>
&nbsp;
    <span style="color: grey;"># If we are downloading something</span>
    <span style="color: grey;"># and the download is ready,</span>
    <span style="color: grey;"># parse that web page and get links from it.</span>
    <span style="color: grey;"># Update the current list of links with the links on this page.</span>
    <span style="color: #530035;">if</span> retrieving != <span style="color: #530035;">None</span> <span style="color: #530035;">and</span> retrieving.<span style="">done</span>:
        links = retrieving.<span style="">links</span><span style="">&#40;</span><span style="">&#41;</span>
        from_yahoo = <span style="color: #530035;">False</span>
        <span style="color: grey;"># We are done downloading.</span>
        retrieving = <span style="color: #530035;">None</span>
    
    <span style="color: grey;"># We are busy downloading.</span>
    <span style="color: #530035;">if</span> retrieving != <span style="color: #530035;">None</span> <span style="color: #530035;">and</span> <span style="color: #530035;">not</span> retrieving.<span style="">done</span>:
        <span style="color: #530035;">fill</span><span style="">&#40;</span><span style="">1</span>, <span style="">1</span>, <span style="">0</span><span style="">&#41;</span>
        <span style="color: #530035;">text</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;please wait....&quot;</span>, <span style="">10</span>, <span style="">20</span><span style="">&#41;</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <p><img src="http://nodebox.net/code/data/media/web_asynchronous1.jpg" alt="web_asynchronous1" /> <br /></p><p>&nbsp;</p><hr /><h2><a title="cache" name="cache"></a>Clearing the cache</h2><p>Most of the content you retrieve with the Web library is cached for faster retrieval in the future. At some point you may want to empty the cache (it can grow quite large). This is easy - to erase the cache completely just do:<br /></p><pre class="python">web.<span style="">clear_cache</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><p>To clear individual caches:</p><pre class="python">web.<span style="">yahoo</span>.<span style="">clear_cache</span><span style="">&#40;</span><span style="">&#41;</span>
web.<span style="">wikipedia</span>.<span style="">clear_cache</span><span style="">&#40;</span><span style="">&#41;</span>
web.<span style="">morguefile</span>.<span style="">clear_cache</span><span style="">&#40;</span><span style="">&#41;</span> 
<span style="color: grey;"># etc... clear_cache() is available for each service in the library</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <hr size="2" width="100%" /><h2><a name="json" title="json"></a>Reading JSON</h2><p><a href="http://json.org/" target="_self">JSON</a> (JavaScript Object Notation) is a lightweight data-interchange format. If you have some JSON data you need to parse into a Python dictionary you can use the bundled and super-easy library by Patrick D. Logan:</p><pre class="python">colr_data = web.<span style="">json</span>.<span style="">read</span><span style="">&#40;</span>colr_data<span style="">&#41;</span>
<span style="color: #530035;">for</span> theme <span style="color: #530035;">in</span> colr_data<span style="">&#91;</span><span style="color: #ff0080;">&quot;schemes&quot;</span><span style="">&#93;</span>:
    theme_id = theme<span style="">&#91;</span><span style="color: #ff0080;">&quot;id&quot;</span><span style="">&#93;</span></pre></pre></p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <p>&nbsp;</p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <hr /><p>The NodeBox Web library addresses the following API&#39;s:</p><ul><li>Yahoo!: <a href="http://developer.yahoo.com/search/" target="_self">http://developer.yahoo.com/search/</a></li><li>Wikipedia: <a href="http://www.mediawiki.org/wiki/API" target="_self">http://www.mediawiki.org/wiki/API</a><br /></li><li>morgueFile: <a href="http://www.morguefile.com/wiki/index.php/Morguefile_api_" target="_self">http://www.morguefile.com/wiki/index.php/Morguefile_api</a></li><li>Flickr: <a href="http://www.flickr.com/services/api/" target="_self">http://www.flickr.com/services/api/</a><br /></li><li>kuler: <a href="http://deliciouslymeta.com/kuler/k_docs.php" target="_self">http://deliciouslymeta.com/kuler/k_docs.php</a></li><li>Colr: <a href="http://www.colr.org/api.html" target="_self">http://www.colr.org/api.html</a><br /></li><li>mimeTeX: <a href="http://www.forkosh.com/mimetex.html" target="_self">http://www.forkosh.com/mimetex.html</a></li><li>Urban Dictionary: <a href="http://www.urbandictionary.com/api.php" target="_self">http://www.urbandictionary.com/api.php</a></li></ul><p>&nbsp;</p><? include("util/comment.php"); ?>
</div>
  
</div>

<div id="footer">
Last modified: Mar 25 2010 | &copy; 2004-2012 <a href="http://www.emrg.be/" class="noexternal">Experimental Media Research Group</a>
</div>
<img src="../g/footer.jpg" style="border:0" class="footer" width="800" height="334" />

</div>

<script>
try{e=document.getElementsByTagName("span");for(i=0;i<e.length;i++){if(e[i].className=="header_image"){src=e[i].getElementsByTagName("img")[0].src;document.getElementById("header_image").src=src;break;}}}catch(e){}
</script>
</body>

</html>