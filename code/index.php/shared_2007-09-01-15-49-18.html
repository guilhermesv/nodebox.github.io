<html>

<head>
<title>NodeBox | error returned</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="imagetoolbar" content="no" />
<meta http-equiv="linode" content="true"/>
<meta name="description" content="" />
<meta name="keywords" content="NodeBox, shared 2007-09-01-15-49-18, bug" />
<link rel="alternate" type="application/rss+xml" title="NodeBox News Feed" href="https://nodebox.net/code/data/rss.xml" />
<link rel="canonical" href="https://nodebox.net/code/index.php/shared_2007-09-01-15-49-18" />
<link type="text/css" rel="stylesheet" media="screen" href="../../media/css/nbar.css">

<script type="text/javascript" src="../js/pop.js"></script>
<script type="text/javascript" src="../js/confirm.js"></script>
<link href="../css/default.css" rel="stylesheet" type="text/css" />
<link href="../css/print.css" rel="stylesheet" type="text/css" media="print" />
<!--[if gte IE 5.5]>
<script type="text/javascript" src="/code/js/pngfix.js"></script>
<![endif]-->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1668598-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body id="body" >
<div class="nbar">
  <ol>
    <li><a class="node" href="https://www.nodebox.net/code/">NodeBox 1<span class="nbar-arrow"></span></a>
      <ol class="nbar-dropdown">
        <li><a href="https://www.nodebox.net/">Homepage</a></li>
        <li><a href="https://www.nodebox.net/node/">NodeBox 3<small>Node-based app for generative design and data visualization</small></a></li>
        <li><a href="https://www.nodebox.net/opengl/">NodeBox OpenGL<small>Hardware-accelerated cross-platform graphics library</small></a></li>
        <li><a href="https://www.nodebox.net/code/">NodeBox 1<small>Generate 2D visuals using Python code (Mac OS X only)</small></a></li>
      </ol>
    </li>
    <li><a class="gallery" href="https://www.nodebox.net/gallery/">Gallery</a></li>
    <li><a class="documentation" href="Tutorial.html">Documentation</a></li>
    <li><a class="forum" href="http://support.nodebox.net/discussions">Forum</a></li>
    <li><a class="blog" href="https://www.nodebox.net/blog/">Blog</a></li>
  </ol>
</div>


<div id="all">
<div id="header_and_navigation">

<div id="header">
<a href="Home.html"><img id="header_image" src="../g/header-small.jpg" width="800" /></a></div>

<div id="title">
<a href="Home.html"><h1>NodeBox</h1>
<strong><em>Create visual output with Python programming code</em></strong>
</a></div>

<div id="contextual">
<div id="languages">
 
</div>

<div id="search">
<form id = "sf" method="get">
<input type="text" id="q" name="q" value="" />
<a href="javascript:document.getElementById('sf').submit();">GO</a>
</form>
</div>

</div>

<div id="navigation">
<div id="navigation_public">
<a id="" href="Home.html">Home</a> 
<a id="" href="Download.html">Download</a> 
<a id="" href="Reference.html">Reference</a> 
<a id="" href="Tutorial.html">Tutorial</a> 
<a id="" href="Library.html">Library</a> 
<a id="" href="Gallery.html">Gallery</a> 
<a id="" href="Share.html">Share</a> 
<a id="" href="About.html">About</a> 
</div>
</div>
 
</div>

<div id="content">

<div id="nodebox-link">
<a href="Home.html"><img src="../g/transparent.gif" /></a>
</div>

<div class="inside">
<? if (do_name() != 'Home') : ?>
 <? endif ?>
<br /><div class="comment"><h1 id="shared-title">error returned</h1>
<strong>Posted by <span class="comment_by">Viki</span> on <em class="date">Sep 01, 2007</em></strong>
<p>Hi , I still can't get this script to work. Sorry i'm still a bit naive with my scripting. The error occurs in the last few lines of script (i think). Please could someone offer a solution here. Thanks in advance:
<br>
<br>
<br>size(500, 500) 
<br>
<br>ovsx = 80
<br>ovsy = 80
<br>ox = 0
<br>oy = 1
<br>dotsize = 5
<br>dx = WIDTH / float(ovsx) +2
<br>dy = HEIGHT / float(ovsy) +2
<br>
<br># import a new particle
<br>svg = ximport("svg")
<br>data = open("diamond.svg").read()
<br>cog = svg.parse(data)# a list of all the paths in the SVG file
<br>
<br>
<br># SVG path instead of textpath
<br>svg = ximport("svg")
<br>data = open("path.svg").read()
<br>paths = svg.parse(data)
<br>myshape = paths[0]
<br> 
<br>for x, y in grid(ovsx, ovsy): 
<br>    sz=random(dotsize)
<br>    px = x*dx-sz 
<br>    py = y*dy-sz 
<br>    if myshape.contains(px, py): # flower.contains instead of tp.contains 
<br>        fill(random(), 0, -5, random()) 
<br>        drawpath(cog[0])(px+random(-ox, ox), py+random(-oy, oy), sz*4) </b></i></a></ul></li></pre></p><br /></div>
Â <hr /><div class='comment'><strong>Posted by <span class="comment_by">ryan</span> on <em class="date">Sep 02, 2007</em></strong><p>In your copy of the script, are there indentations in the last section?  They might have just gotten swallowed up by the forum, but they're important, since python uses them to figure out the structure of the program.  It should be<pre class="python"><span style="color: #530035;">for</span> x, y <span style="color: #530035;">in</span> <span style="color: #530035;">grid</span><span style="">&#40;</span>ovsx, ovsy<span style="">&#41;</span>:
    sz=<span style="color: #530035;">random</span><span style="">&#40;</span>dotsize<span style="">&#41;</span>
    px = x*dx-sz
    py = y*dy-sz
    <span style="color: #530035;">if</span> myshape.<span style="">contains</span><span style="">&#40;</span>px, py<span style="">&#41;</span>: <span style="color: grey;"># flower.contains instead of tp.contains</span>
        <span style="color: #530035;">fill</span><span style="">&#40;</span><span style="color: #530035;">random</span><span style="">&#40;</span><span style="">&#41;</span>, <span style="">0</span>, <span style="">-5</span>, <span style="color: #530035;">random</span><span style="">&#40;</span><span style="">&#41;</span><span style="">&#41;</span>
        <span style="color: #530035;">drawpath</span><span style="">&#40;</span>cog<span style="">&#91;</span><span style="">0</span><span style="">&#93;</span><span style="">&#41;</span><span style="">&#40;</span>px+<span style="color: #530035;">random</span><span style="">&#40;</span>-ox, ox<span style="">&#41;</span>, py+<span style="color: #530035;">random</span><span style="">&#40;</span>-oy, oy<span style="">&#41;</span>, sz*<span style="">4</span><span style="">&#41;</span></pre></pre>right?
<br>
<br>No offense intended if that's not the problem!  I'm no expert or anything; I just started using NodeBox today myself. </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Viki</span> on <em class="date">Sep 02, 2007</em></strong><p>Hi. Thanks for the reply, the code i have is indented in NodeBox. When I copied and pasted it into the blog it remove the indents.The error is defined as:
<br>
<br>
<br>TypeError: 'NoneType' object is not callable </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Tom De Smedt</span> on <em class="date">Sep 05, 2007</em></strong><p>There is something wrong with the last line:<pre class="python"><span style="color: #530035;">drawpath</span><span style="">&#40;</span>cog<span style="">&#91;</span><span style="">0</span><span style="">&#93;</span><span style="">&#41;</span><span style="">&#40;</span>px+<span style="color: #530035;">random</span><span style="">&#40;</span>-ox, ox<span style="">&#41;</span>, py+<span style="color: #530035;">random</span><span style="">&#40;</span>-oy, oy<span style="">&#41;</span>, sz*<span style="">4</span><span style="">&#41;</span></pre></pre>How it is written there means the same as:<pre class="python">something = <span style="color: #530035;">drawpath</span><span style="">&#40;</span>cog<span style="">&#91;</span><span style="">0</span><span style="">&#93;</span><span style="">&#41;</span>
something<span style="">&#40;</span>px+<span style="color: #530035;">random</span><span style="">&#40;</span>-ox, ox<span style="">&#41;</span>, py+<span style="color: #530035;">random</span><span style="">&#40;</span>-oy, oy<span style="">&#41;</span>, sz*<span style="">4</span><span style="">&#41;</span></pre></pre>But drawpath() doesn't return a command or anything you can append parameters to. That's what the error is saying: "drawpath returns nothing I can call as a command".
<br>
<br>You probably mean to do something like this:<pre class="python"><span style="color: #530035;">scale</span><span style="">&#40;</span>sz*<span style="">4</span><span style="">&#41;</span>
<span style="color: #530035;">translate</span><span style="">&#40;</span>px+<span style="color: #530035;">random</span><span style="">&#40;</span>-ox, ox<span style="">&#41;</span>, py+<span style="color: #530035;">random</span><span style="">&#40;</span>-oy, oy<span style="">&#41;</span><span style="">&#41;</span>
<span style="color: #530035;">drawpath</span><span style="">&#40;</span>cog<span style="">&#91;</span><span style="">0</span><span style="">&#93;</span><span style="">&#41;</span></pre></pre>You're almost there ;-) </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Viki</span> on <em class="date">Sep 05, 2007</em></strong><p>Hi,
<br>
<br>I tagged your code in. The error has gone no cog 's have been drawn? Thanks for your help so far. </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Tom De Smedt</span> on <em class="date">Sep 05, 2007</em></strong><p>Can you mail me the script together with the source SVG files?
<br>(tom at organisms dot be) </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Tom De Smedt</span> on <em class="date">Sep 06, 2007</em></strong><p>I've cleaned it up a bit:<pre class="python"><span style="color: #530035;">size</span><span style="">&#40;</span><span style="">500</span>, <span style="">500</span><span style="">&#41;</span> 
&nbsp;
svg = <span style="color: #530035;">ximport</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;svg&quot;</span><span style="">&#41;</span>
&nbsp;
data = <span style="color: #530035;">open</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;path.svg&quot;</span><span style="">&#41;</span>.<span style="">read</span><span style="">&#40;</span><span style="">&#41;</span>
flower = svg.<span style="">parse</span><span style="">&#40;</span>data<span style="">&#41;</span>
flower = flower<span style="">&#91;</span><span style="">0</span><span style="">&#93;</span>
&nbsp;
data = <span style="color: #530035;">open</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;diamond.svg&quot;</span><span style="">&#41;</span>.<span style="">read</span><span style="">&#40;</span><span style="">&#41;</span>
cog = svg.<span style="">parse</span><span style="">&#40;</span>data<span style="">&#41;</span>
&nbsp;
<span style="color: grey;"># This is the trick that makes it work:</span>
<span style="color: grey;"># I need to make a list copy of the path returned from SVG,</span>
<span style="color: grey;"># otherwise I can't translate each copy indivdually </span>
<span style="color: grey;"># and the cogs all end up in the top left corner.</span>
cog = <span style="">&#91;</span>pt <span style="color: #530035;">for</span> pt <span style="color: #530035;">in</span> cog<span style="">&#91;</span><span style="">0</span><span style="">&#93;</span><span style="">&#93;</span>
&nbsp;
<span style="color: #530035;">scale</span><span style="">&#40;</span><span style="">2.5</span><span style="">&#41;</span> <span style="color: grey;"># flower size</span>
<span style="color: #530035;">translate</span><span style="">&#40;</span><span style="">20</span>, <span style="">20</span><span style="">&#41;</span> <span style="color: grey;"># flower position</span>
&nbsp;
&nbsp;
spacing = <span style="">6</span> <span style="color: grey;"># more or less cogs onscreen</span>
<span style="color: #530035;">for</span> x, y <span style="color: #530035;">in</span> <span style="color: #530035;">grid</span><span style="">&#40;</span><span style="color: #530035;">WIDTH</span>/spacing, <span style="color: #530035;">HEIGHT</span>/spacing, spacing, spacing<span style="">&#41;</span>: 
    <span style="color: #530035;">if</span> flower.<span style="">contains</span><span style="">&#40;</span>x, y<span style="">&#41;</span>:
        <span style="color: #530035;">fill</span><span style="">&#40;</span><span style="color: #530035;">random</span><span style="">&#40;</span><span style="">&#41;</span>, <span style="">0</span>, <span style="color: #530035;">random</span><span style="">&#40;</span><span style="">&#41;</span>, <span style="">0.8</span><span style="">&#41;</span> <span style="color: grey;"># each cog's color</span>
        <span style="color: #530035;">push</span><span style="">&#40;</span><span style="">&#41;</span>
        <span style="color: #530035;">translate</span><span style="">&#40;</span>x, y<span style="">&#41;</span>
        <span style="color: #530035;">scale</span><span style="">&#40;</span><span style="color: #530035;">random</span><span style="">&#40;</span><span style="">0.8</span><span style="">&#41;</span><span style="">&#41;</span> <span style="color: grey;"># makes cogs bigger or smaller</span>
        <span style="color: #530035;">drawpath</span><span style="">&#40;</span>cog<span style="">&#41;</span>
        <span style="color: #530035;">pop</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre></b></i></a></ul></li></pre></p><br />
<img src="../data/shared/example_bitbopcog.png" /><br /><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Viki</span> on <em class="date">Sep 07, 2007</em></strong><p>Brilliant. Thanks so much for the help. </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Viki</span> on <em class="date">Sep 07, 2007</em></strong><p>I also edited your script to use a tif image instead of the cog image: 
<br>
<br>
<br>size(500, 500) 
<br>
<br>svg = ximport("svg") 
<br>
<br>data = open("path.svg").read() 
<br>flower = svg.parse(data) 
<br>flower = flower[0] 
<br>
<br>coreimage = ximport("coreimage") 
<br>
<br>scale(2.5) # flower size 
<br>translate(10, 10) # flower position 
<br>
<br>
<br>spacing = 8 # more or less cogs onscreen 
<br>for x, y in grid(WIDTH/spacing , HEIGHT/spacing, spacing, spacing): 
<br>if flower.contains(x, y): 
<br>fill(2, random()/4, random(), 1) # each cog's color 
<br>push() 
<br>translate(x, y) 
<br>scale(random(-0.16)) # makes cogs bigger or smaller 
<br>image("lily.tif", 0, 0) 
<br>pop() 
<br>
<br>
<br>thanks again! </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Tom De Smedt</span> on <em class="date">Sep 08, 2007</em></strong><p>Have fun!
<br>
<br>PS.: you can put pieces of code you post between < code > and < /code > (without the spaces) to turn on the code coloring. </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Viki</span> on <em class="date">Sep 08, 2007</em></strong><p>Hmmm. <br>I was wondering if I could make a futher adaptation to your code so that spacing between each duplicate is proportional to the previous duplicates size, so I guess what I mean is that duplicates are not arranged in a grid as prevously and would not overlap with the randomness of scale was turned up to the max.  These example should hopefully illustrate what I mean.<br><br>:)<br><br><a href="http://firstrung.co.uk/dbimgs/bubbles_big.jpg">http://firstrung.co.uk/dbimgs/bubbles_big.jpg</a><br><a href="http://www.norcimo.com/blog/archives/upload/2006/11/Bubbles06r.jpg">http://www.norcimo.com/blog/archives/upload/2006/11/Bubbles06r.jpg</a><br><a href="http://www.jtkirkland.com/drawing/draw.detail.AroundtheBend.jpg">http://www.jtkirkland.com/drawing/draw.detail.AroundtheBend.jpg</a> </b></i></a></ul></li></pre></p><br /></div><? include("util/comment.php"); ?>
</div>
  
</div>

<div id="footer">
Last modified: Apr 11 2008 | &copy; 2004-2012 <a href="http://www.emrg.be/" class="noexternal">Experimental Media Research Group</a>
</div>
<img src="../g/footer.jpg" style="border:0" class="footer" width="800" height="334" />

</div>

<script>
try{e=document.getElementsByTagName("span");for(i=0;i<e.length;i++){if(e[i].className=="header_image"){src=e[i].getElementsByTagName("img")[0].src;document.getElementById("header_image").src=src;break;}}}catch(e){}
</script>
</body>

</html>