<html>

<head>
<title>NodeBox | Quicktime</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="imagetoolbar" content="no" />
<meta http-equiv="linode" content="true"/>
<meta name="description" content="" />
<meta name="keywords" content="NodeBox, Quicktime, " />
<link rel="alternate" type="application/rss+xml" title="NodeBox News Feed" href="https://nodebox.net/code/data/rss.xml" />
<link rel="canonical" href="https://nodebox.net/code/index.php/Quicktime" />
<link type="text/css" rel="stylesheet" media="screen" href="../../media/css/nbar.css">

<script type="text/javascript" src="../js/pop.js"></script>
<script type="text/javascript" src="../js/confirm.js"></script>
<link href="../css/default.css" rel="stylesheet" type="text/css" />
<link href="../css/print.css" rel="stylesheet" type="text/css" media="print" />
<!--[if gte IE 5.5]>
<script type="text/javascript" src="/code/js/pngfix.js"></script>
<![endif]-->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1668598-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body id="body" >
<div class="nbar">
  <ol>
    <li><a class="node" href="https://www.nodebox.net/code/">NodeBox 1<span class="nbar-arrow"></span></a>
      <ol class="nbar-dropdown">
        <li><a href="https://www.nodebox.net/">Homepage</a></li>
        <li><a href="https://www.nodebox.net/node/">NodeBox 3<small>Node-based app for generative design and data visualization</small></a></li>
        <li><a href="https://www.nodebox.net/opengl/">NodeBox OpenGL<small>Hardware-accelerated cross-platform graphics library</small></a></li>
        <li><a href="https://www.nodebox.net/code/">NodeBox 1<small>Generate 2D visuals using Python code (Mac OS X only)</small></a></li>
      </ol>
    </li>
    <li><a class="gallery" href="https://www.nodebox.net/gallery/">Gallery</a></li>
    <li><a class="documentation" href="Tutorial.html">Documentation</a></li>
    <li><a class="forum" href="http://support.nodebox.net/discussions">Forum</a></li>
    <li><a class="blog" href="https://www.nodebox.net/blog/">Blog</a></li>
  </ol>
</div>


<div id="all">
<div id="header_and_navigation">

<div id="header">
<a href="Home.html"><img id="header_image" src="../g/header-small.jpg" width="800" /></a></div>

<div id="title">
<a href="Home.html"><h1>NodeBox</h1>
<strong><em>Create visual output with Python programming code</em></strong>
</a></div>

<div id="contextual">
<div id="languages">
 
</div>

<div id="search">
<form id = "sf" method="get">
<input type="text" id="q" name="q" value="" />
<a href="javascript:document.getElementById('sf').submit();">GO</a>
</form>
</div>

</div>

<div id="navigation">
<div id="navigation_public">
<a id="" href="Home.html">Home</a> 
<a id="" href="Download.html">Download</a> 
<a id="" href="Reference.html">Reference</a> 
<a id="" href="Tutorial.html">Tutorial</a> 
<a id="" href="Library.html">Library</a> 
<a id="" href="Gallery.html">Gallery</a> 
<a id="" href="Share.html">Share</a> 
<a id="" href="About.html">About</a> 
</div>
</div>
 
</div>

<div id="content">

<div id="nodebox-link">
<a href="Home.html"><img src="../g/transparent.gif" /></a>
</div>

<div class="inside">
<? if (do_name() != 'Home') : ?>
 <h3>Quicktime</h3><? endif ?>
<h2>Description</h2>  <p>The NodeBox Quicktime library adds movie (and audio) support to NodeBox. You can use it to grab image frames from a movie and display them in NodeBox or manipulate them with <a href="Core_Image.html" target="_self">Core Image</a>. Furthermore, you can use the library to play audio in NodeBox, make audio selections, and control the volume and rate from your script.<br /> </p><h2>Download</h2>  <table border="0"><tbody><tr><td><a href="https://www.nodebox.net/code/data/media/database.zip" target="_self"><img src="../data/media/download.gif" alt="download" /></a></td><td><a href="https://www.nodebox.net/code/data/media/quicktime.zip" target="_self">quicktime.zip</a> (1.5MB)<br /> <em>Last updated for NodeBox 1.9.0<br /></em><em>Author: Tom De Smedt</em><br /></td></tr></tbody></table>  <h2>Documentation</h2><ul><li><a href="Quicktime.html#load" target="_self">How to get the library up and running</a></li><li><a href="Quicktime.html#movie" target="_self">Movie frames</a></li><li><a href="Quicktime.html#coreimage" target="_self">Movie frames in Core Image</a><br /></li><li><a href="Quicktime.html#audio" target="_self">Audio playback</a></li><li><a href="Quicktime.html#selections" target="_self">Copying and pasting selections</a></li></ul><p>&nbsp;</p><hr /><h2><a name="load" title="load"></a>How to get the library up and running</h2><p>Put the downloaded <em>quicktime</em> folder in <em>~/Library/Application Support/NodeBox/</em> or in the same folder as your script so NodeBox can find the library. Then import the library in your script:<br /></p><pre class="python">quicktime = <span style="color: #530035;">ximport</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;quicktime&quot;</span><span style="">&#41;</span></pre></pre></p>&nbsp;       <hr /><h2><a name="movie" title="movie"></a>Movie frames</h2><p>The library has a <em>movie()</em> command that opens a movie from a given location. You can open any type of movie you could normally open with the Quicktime application:</p><pre class="python">movie<span style="">&#40;</span>path<span style="">&#41;</span></pre></pre><p>The command returns a <em>Movie</em> object with a number of useful properties:</p><ul><li><em>movie.path</em>: the source path.<br /></li><li><em>movie.duration</em>: the length of the movie in seconds.</li><li><em>movie.has_video</em>: <em>True</em> if the movie has a video track.</li><li><em>movie.has_audio</em>: <em>True</em> if the movie has an audio track. <br /></li><li><em>movie.width</em>: the width of the movie in pixels.</li><li><em>movie.height</em>: the height of the movie in pixels.</li></ul><p>The returned movie object has two methods to grab image frames:</p><pre class="python">movie.<span style="">frame</span><span style="">&#40;</span><span style="">time</span><span style="">&#41;</span></pre></pre><pre class="python">movie.<span style="">frames</span><span style="">&#40;</span>n=<span style="">10</span>, start=<span style="">0</span>, stop=<span style="color: #530035;">None</span><span style="">&#41;</span></pre></pre><p>The <em>frame()</em> method returns a <em>MovieFrame</em> object with image data at the given <em>time</em> (in seconds) in the movie. The <em>frames()</em> command returns a list of n <em>MovieFrame</em> objects between the given <em>start</em> and stop <em>time</em> (in seconds). The start and stop parameters are optional.</p><p>A movie frame object has the following properties:</p><ul><li><em>frame.data</em>: the image data which can be passed to the <a href="Reference_|_image().html" target="_self">image()</a> command. <br /></li><li><em>frame.time</em>: the time where the frame appears in the movie.</li><li><em>frame.src</em>: the source path of the movie to which this frame belongs.</li><li><em>frame.width</em></li><li><em>frame.height</em></li></ul><p>Displaying frames in NodeBox is really very easy. The following script loops through all the frames in an animation:</p><pre class="python">movie = quicktime.<span style="">movie</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;twisted_world.mp4&quot;</span><span style="">&#41;</span>
<span style="color: #530035;">size</span><span style="">&#40;</span>movie.<span style="">width</span>, movie.<span style="">height</span><span style="">&#41;</span>
<span style="color: #530035;">speed</span><span style="">&#40;</span><span style="">50</span><span style="">&#41;</span>
<span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>draw</span><span style="">&#40;</span><span style="">&#41;</span>:
    frame = movie.<span style="">frame</span><span style="">&#40;</span>FRAME*<span style="">0.1</span><span style="">&#41;</span>
    <span style="color: #530035;">image</span><span style="">&#40;</span><span style="color: #530035;">None</span>, <span style="">0</span>, <span style="">0</span>, data=frame.<span style="">data</span>, width=frame.<span style="">width</span><span style="">&#41;</span></pre></pre></p>&nbsp;       <hr /><h2><a name="coreimage" title="coreimage"></a>Movie frames in Core Image</h2><p>The Quicktime library and the Core Image library play really well together. A MovieFrame object returned from <em>movie.frame()</em> or the <em>movie.frames()</em> list can be passed to the <em>canvas.layer()</em> method in Core Image. Then you can apply all sorts of filters and effects to it:</p><pre class="python">coreimage = <span style="color: #530035;">ximport</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;coreimage&quot;</span><span style="">&#41;</span>
quicktime = <span style="color: #530035;">ximport</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;quicktime&quot;</span><span style="">&#41;</span>
&nbsp;
movie = quicktime.<span style="">movie</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;twisted_world.mp4&quot;</span><span style="">&#41;</span>
frame = movie.<span style="">frame</span><span style="">&#40;</span><span style="">1.0</span><span style="">&#41;</span>
&nbsp;
canvas = coreimage.<span style="">canvas</span><span style="">&#40;</span>movie.<span style="">width</span>, movie.<span style="">height</span><span style="">&#41;</span>
l = canvas.<span style="">layer</span><span style="">&#40;</span>frame<span style="">&#41;</span>
l.<span style="">filter_zoomblur</span><span style="">&#40;</span><span style="">&#41;</span>
canvas.<span style="">draw</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre></p>&nbsp;       <p>&nbsp;</p><hr /><h2><a name="audio" title="audio"></a>Audio playback</h2><p>The library has an <em>audio()</em> command that opens a sound from a given location. You can open any type of sound you could normally open with the Quicktime application:</p><pre class="python">audio<span style="">&#40;</span>path<span style="">&#41;</span></pre></pre><p>The command returns an <em>Audio</em> object with a number of useful properties:</p><ul><li><em>audio.path</em>: the source path.<br /></li><li><em>audio</em><em>.duration</em>: the length of the movie in seconds.</li><li><em>audio</em><em>.has_video</em>: <em>True</em> if the movie has a video track.</li><li><em>audio</em><em>.has_audio</em>: <em>True</em> if the movie has an audio track. <br /></li><li><em>audio.volume</em>: the volume at which the audio is playing (between 0.0 and 2.0).</li><li><em>audio.time</em>: the current time (in seconds) when the audio is playing.</li><li><em>audio.rate</em>: the rate or speed at which the audio is playing (between 0.25 and 5.0).</li><li><em>audio.paused</em>: True when the audio playback is paused, but not stopped.</li></ul><p>The returned audio object also has a number of methods that control the playback:</p><pre class="python">audio.<span style="">play</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><pre class="python">audio.<span style="">stop</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><pre class="python">audio.<span style="">pause</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><pre class="python">audio.<span style="">is_playing</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><pre class="python">audio.<span style="color: #530035;">reset</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><p>The <em>audio.is_playing()</em> method returns <em>True</em> as long as the sound is playing in NodeBox. While the sound is playing you can adjust its <em>volume</em> and <em>rate</em>. It will begin playing at its <em>time</em> property. The <em>audio.reset() </em>method resets the volume, time and rate to the default values (0, 0 and 1 respectively).</p><p>The library does not have any functionality to export audio from NodeBox. </p><p>&nbsp;</p><hr /><h2><a name="selections" title="selections"></a>Copying and pasting selections</h2><p>Sometimes you may want to work with a selection of a movie instead of the whole movie, or a one-second sample of the audio that you are going to loop. For these purposes, both the <em>Movie</em> and the <em>Audio</em> object have a selection() method:</p><pre class="python">media.<span style="">selection</span><span style="">&#40;</span>start=<span style="">0</span>, stop=<span style="color: #530035;">None</span><span style="">&#41;</span></pre></pre><p>It returns a new movie or a new audio object ranged between the given <em>start</em> and <em>stop</em> time. For example, here&#39;s how to create a short loop from an audio fragment:<br /></p><pre class="python">audio = quicktime.<span style="">audio</span><span style="">&#40;</span><span style="color: #ff0080;">&quot;modron_cube.mp3&quot;</span><span style="">&#41;</span>
audio = audio.<span style="">selection</span><span style="">&#40;</span>start=<span style="">0</span>, stop=<span style="">7.2</span><span style="">&#41;</span>
<span style="color: #530035;">speed</span><span style="">&#40;</span><span style="">100</span><span style="">&#41;</span>
<span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>draw</span><span style="">&#40;</span><span style="">&#41;</span>:
    <span style="color: #530035;">if</span> <span style="color: #530035;">not</span> audio.<span style="">is_playing</span>:
        audio.<span style="">play</span><span style="">&#40;</span><span style="">&#41;</span></pre></pre><? include("util/comment.php"); ?>
</div>
  
</div>

<div id="footer">
Last modified: Oct 01 2007 | &copy; 2004-2012 <a href="http://www.emrg.be/" class="noexternal">Experimental Media Research Group</a>
</div>
<img src="../g/footer.jpg" style="border:0" class="footer" width="800" height="334" />

</div>

<script>
try{e=document.getElementsByTagName("span");for(i=0;i<e.length;i++){if(e[i].className=="header_image"){src=e[i].getElementsByTagName("img")[0].src;document.getElementById("header_image").src=src;break;}}}catch(e){}
</script>
</body>

</html>