<html>

<head>
<title>NodeBox | Penrose Tiling</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta http-equiv="imagetoolbar" content="no" />
<meta http-equiv="linode" content="true"/>
<meta name="description" content="" />
<meta name="keywords" content="NodeBox, shared 2008-02-23-01-29-14, artwork, source code" />
<link rel="alternate" type="application/rss+xml" title="NodeBox News Feed" href="https://nodebox.net/code/data/rss.xml" />
<link rel="canonical" href="https://nodebox.net/code/index.php/shared_2008-02-23-01-29-14" />
<link type="text/css" rel="stylesheet" media="screen" href="../../media/css/nbar.css">

<script type="text/javascript" src="../js/pop.js"></script>
<script type="text/javascript" src="../js/confirm.js"></script>
<link href="../css/default.css" rel="stylesheet" type="text/css" />
<link href="../css/print.css" rel="stylesheet" type="text/css" media="print" />
<!--[if gte IE 5.5]>
<script type="text/javascript" src="/code/js/pngfix.js"></script>
<![endif]-->

<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-1668598-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head>

<body id="body" >
<div class="nbar">
  <ol>
    <li><a class="node" href="https://www.nodebox.net/code/">NodeBox 1<span class="nbar-arrow"></span></a>
      <ol class="nbar-dropdown">
        <li><a href="https://www.nodebox.net/">Homepage</a></li>
        <li><a href="https://www.nodebox.net/node/">NodeBox 3<small>Node-based app for generative design and data visualization</small></a></li>
        <li><a href="https://www.nodebox.net/opengl/">NodeBox OpenGL<small>Hardware-accelerated cross-platform graphics library</small></a></li>
        <li><a href="https://www.nodebox.net/code/">NodeBox 1<small>Generate 2D visuals using Python code (Mac OS X only)</small></a></li>
      </ol>
    </li>
    <li><a class="gallery" href="https://www.nodebox.net/gallery/">Gallery</a></li>
    <li><a class="documentation" href="Tutorial.html">Documentation</a></li>
    <li><a class="forum" href="http://support.nodebox.net/discussions">Forum</a></li>
    <li><a class="blog" href="https://www.nodebox.net/blog/">Blog</a></li>
  </ol>
</div>


<div id="all">
<div id="header_and_navigation">

<div id="header">
<a href="Home.html"><img id="header_image" src="../g/header-small.jpg" width="800" /></a></div>

<div id="title">
<a href="Home.html"><h1>NodeBox</h1>
<strong><em>Create visual output with Python programming code</em></strong>
</a></div>

<div id="contextual">
<div id="languages">
 
</div>

<div id="search">
<form id = "sf" method="get">
<input type="text" id="q" name="q" value="" />
<a href="javascript:document.getElementById('sf').submit();">GO</a>
</form>
</div>

</div>

<div id="navigation">
<div id="navigation_public">
<a id="" href="Home.html">Home</a> 
<a id="" href="Download.html">Download</a> 
<a id="" href="Reference.html">Reference</a> 
<a id="" href="Tutorial.html">Tutorial</a> 
<a id="" href="Library.html">Library</a> 
<a id="" href="Gallery.html">Gallery</a> 
<a id="" href="Share.html">Share</a> 
<a id="" href="About.html">About</a> 
</div>
</div>
 
</div>

<div id="content">

<div id="nodebox-link">
<a href="Home.html"><img src="../g/transparent.gif" /></a>
</div>

<div class="inside">
<? if (do_name() != 'Home') : ?>
 <? endif ?>
<br /><div class="comment"><h1 id="shared-title">Penrose Tiling</h1>
<strong>Posted by <span class="comment_by">Mark M</span> on <em class="date">Feb 23, 2008</em></strong>
<br /><br /><img src="../data/shared/2008-02-23-01-29-14_Contract_Penrose.jpg" /><br /><br />
<p>This is a short script to generate the non-periodic penrose tiling. As mentioned under the L-system posting a while back this can be produced by means of a well-known l-system recipe. The L-system works beautifully but it is very difficult to see how it works. This script uses a contraction method of starting with one half of one of the tiles and recursively breaking it down into smaller units. One of the goals was to show the intense relationship between the tiling and the golden ratio and also to see if it could be done using nothing except Nodebox's transformations. Enjoy:<pre class="python"><span style="color: #530035;">from</span> <span style="">math</span> <span style="color: #530035;">import</span> sqrt
<span style="color: #530035;">stroke</span><span style="">&#40;</span>.<span style="">9</span><span style="">&#41;</span>
<span style="color: #530035;">strokewidth</span><span style="">&#40;</span>.<span style="">35</span><span style="">&#41;</span>
<span style="color: #530035;">translate</span><span style="">&#40;</span><span style="">-9</span>, <span style="">466</span><span style="">&#41;</span>
<span style="color: #530035;">transform</span><span style="">&#40;</span>CORNER<span style="">&#41;</span>
<span style="color: #530035;">colormode</span><span style="">&#40;</span><span style="color: #530035;">HSB</span><span style="">&#41;</span>
&nbsp;
<span style="color: grey;">### Golden Ratio</span>
phi = <span style="">1.61803399</span>
sqrt2_phi = sqrt<span style="">&#40;</span><span style="">2</span> + phi<span style="">&#41;</span>
&nbsp;
<span style="color: #530035;">class</span> thinRhomb<span style="">&#40;</span><span style="">&#41;</span>:
    <span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'></span><span style="color: red">__init__</span><span style="">&#40;</span><span style="">self</span>,l, <span style="">type</span>, draw=<span style="color: #530035;">True</span><span style="">&#41;</span>:
        <span style="">self</span>.<span style="">length</span> = l
        <span style="">self</span>.<span style="">type</span> = <span style="">type</span>
        <span style="color: #530035;">if</span> draw:
            <span style="">self</span>.<span style="">draw</span><span style="">&#40;</span><span style="">&#41;</span>
    <span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>draw</span><span style="">&#40;</span><span style="">self</span><span style="">&#41;</span>:
        <span style="color: #530035;">fill</span><span style="">&#40;</span><span style="">self</span>.<span style="">type</span>/<span style="">3.0</span>+.<span style="">25</span>, .<span style="">3</span>, <span style="">self</span>.<span style="">type</span>/<span style="">3.0</span>+.<span style="">5</span><span style="">&#41;</span>
        l = <span style="">self</span>.<span style="">length</span>
        <span style="color: #530035;">beginpath</span><span style="">&#40;</span><span style="">0</span>,<span style="">0</span><span style="">&#41;</span>
        <span style="color: #530035;">lineto</span><span style="">&#40;</span>sqrt2_phi/<span style="">2</span> * l, l/<span style="">&#40;</span><span style="">2</span>*phi<span style="">&#41;</span><span style="">&#41;</span>
        <span style="color: #530035;">lineto</span><span style="">&#40;</span>sqrt2_phi*l,<span style="">0</span><span style="">&#41;</span>
        <span style="color: #530035;">lineto</span><span style="">&#40;</span>sqrt2_phi/<span style="">2</span> * l, -l/<span style="">&#40;</span><span style="">2</span>*phi<span style="">&#41;</span><span style="">&#41;</span>
        <span style="color: #530035;">return</span> <span style="color: #530035;">endpath</span><span style="">&#40;</span><span style="">&#41;</span>
    <span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>contract</span><span style="">&#40;</span><span style="">self</span>, minLength, rule=<span style="color: #530035;">None</span><span style="">&#41;</span>:
        L = <span style="">self</span>.<span style="">length</span>
        <span style="color: #530035;">if</span> L/phi &lt; minLength:
            <span style="">self</span>.<span style="">draw</span><span style="">&#40;</span><span style="">&#41;</span>
            <span style="color: #530035;">return</span>
        <span style="color: #530035;">if</span> <span style="">self</span>.<span style="">type</span> == <span style="">0</span>:
            <span style="color: grey;">## scale with negative number==reflection</span>
            <span style="color: #530035;">scale</span><span style="">&#40;</span>x=<span style="">1</span>, y=<span style="">-1</span><span style="">&#41;</span>
        <span style="color: grey;"># One Thin Rhomb becomes one thick via rotation and one thin via rotation/translation</span>
        <span style="color: #530035;">push</span><span style="">&#40;</span><span style="">&#41;</span>
        <span style="color: #530035;">rotate</span><span style="">&#40;</span><span style="">-18</span><span style="">&#41;</span>
        Rhomb = thickRhomb<span style="">&#40;</span>L/phi, <span style="">0</span>,  draw=<span style="color: #530035;">False</span><span style="">&#41;</span>
        Rhomb.<span style="">contract</span><span style="">&#40;</span>minLength<span style="">&#41;</span>
        <span style="color: #530035;">pop</span><span style="">&#40;</span><span style="">&#41;</span>
        <span style="color: #530035;">push</span><span style="">&#40;</span><span style="">&#41;</span>
        <span style="color: #530035;">translate</span><span style="">&#40;</span><span style="">0</span>,L/phi<span style="">&#41;</span>
        <span style="color: #530035;">rotate</span><span style="">&#40;</span><span style="">108</span><span style="">&#41;</span>
        <span style="color: #530035;">translate</span><span style="">&#40;</span><span style="">0</span>,L<span style="">&#41;</span>
        Rhomb = thinRhomb<span style="">&#40;</span>L/phi, <span style="">1</span>,  draw=<span style="color: #530035;">False</span><span style="">&#41;</span>
        Rhomb.<span style="">contract</span><span style="">&#40;</span>minLength<span style="">&#41;</span>
        <span style="color: #530035;">pop</span><span style="">&#40;</span><span style="">&#41;</span>
        
<span style="color: #530035;">class</span> thickRhomb<span style="">&#40;</span><span style="">&#41;</span>:
    <span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'></span><span style="color: red">__init__</span><span style="">&#40;</span><span style="">self</span>, l, <span style="">type</span>, draw=<span style="color: #530035;">True</span><span style="">&#41;</span>:
        <span style="">self</span>.<span style="">length</span> = l
        <span style="">self</span>.<span style="">type</span> = <span style="">type</span>
        <span style="color: #530035;">if</span> draw:
            <span style="">self</span>.<span style="">draw</span><span style="">&#40;</span><span style="">&#41;</span>
    <span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>draw</span><span style="">&#40;</span><span style="">self</span><span style="">&#41;</span>:
        <span style="color: #530035;">fill</span><span style="">&#40;</span><span style="">&#40;</span><span style="">self</span>.<span style="">type</span>+.<span style="">6</span><span style="">&#41;</span>/<span style="">3.0</span>, .<span style="">25</span>, <span style="">&#40;</span><span style="">self</span>.<span style="">type</span>+.<span style="">3</span><span style="">&#41;</span>/<span style="">2.0</span><span style="">&#41;</span>
        l = <span style="">self</span>.<span style="">length</span>
        <span style="color: #530035;">beginpath</span><span style="">&#40;</span><span style="">0</span>,<span style="">0</span><span style="">&#41;</span>
        <span style="color: #530035;">lineto</span><span style="">&#40;</span>phi/<span style="">2</span>*l, -<span style="">&#40;</span>phi<span style="">-1</span><span style="">&#41;</span>* sqrt2_phi/<span style="">2</span>*l<span style="">&#41;</span>
        <span style="color: #530035;">lineto</span><span style="">&#40;</span>phi*l,<span style="">0</span><span style="">&#41;</span>
        <span style="color: #530035;">lineto</span><span style="">&#40;</span>phi/<span style="">2</span>*l, <span style="">&#40;</span>phi<span style="">-1</span><span style="">&#41;</span>* sqrt2_phi/<span style="">2</span>*l<span style="">&#41;</span>
        <span style="color: #530035;">return</span> <span style="color: #530035;">endpath</span><span style="">&#40;</span><span style="">&#41;</span>
    <span style="color: #530035;">def</span> <span style='color:rgb(255,0,50)'>contract</span><span style="">&#40;</span><span style="">self</span>, minLength, rule=<span style="color: #530035;">None</span><span style="">&#41;</span>:
        L = <span style="">self</span>.<span style="">length</span>
        <span style="color: #530035;">if</span> L/phi &lt; minLength:
            <span style="">self</span>.<span style="">draw</span><span style="">&#40;</span><span style="">&#41;</span>
            <span style="color: #530035;">return</span>
        <span style="color: #530035;">if</span> <span style="">self</span>.<span style="">type</span> == <span style="">1</span>:
            <span style="color: #530035;">scale</span><span style="">&#40;</span><span style="">-1</span>,<span style="">1</span><span style="">&#41;</span>
            <span style="color: #530035;">translate</span><span style="">&#40;</span>-L*phi,<span style="">0</span><span style="">&#41;</span>
        <span style="color: grey;"># One Thick Rhomb becomes one thick via translation and on thick via rotation/translation</span>
        <span style="color: grey;"># one thin via translation/rotation</span>
        <span style="color: #530035;">push</span><span style="">&#40;</span><span style="">&#41;</span>
        <span style="color: #530035;">translate</span><span style="">&#40;</span>L/phi, <span style="">0</span><span style="">&#41;</span>
        Rh = thickRhomb<span style="">&#40;</span>L/phi,<span style="">1</span>, draw=<span style="color: #530035;">False</span><span style="">&#41;</span>
        Rh.<span style="">contract</span><span style="">&#40;</span>minLength<span style="">&#41;</span>
        <span style="color: #530035;">pop</span><span style="">&#40;</span><span style="">&#41;</span>
        <span style="color: #530035;">push</span><span style="">&#40;</span><span style="">&#41;</span>
        <span style="color: #530035;">rotate</span><span style="">&#40;</span><span style="">216</span><span style="">&#41;</span>
        <span style="color: #530035;">translate</span><span style="">&#40;</span>-L, <span style="">-0</span><span style="">&#41;</span>
        Rh = thickRhomb<span style="">&#40;</span>L/phi, <span style="">0</span>, draw=<span style="color: #530035;">False</span><span style="">&#41;</span>
        Rh.<span style="">contract</span><span style="">&#40;</span>minLength<span style="">&#41;</span>
        <span style="color: #530035;">pop</span><span style="">&#40;</span><span style="">&#41;</span>
        <span style="color: #530035;">push</span><span style="">&#40;</span><span style="">&#41;</span>
        <span style="color: #530035;">translate</span><span style="">&#40;</span>L/phi, <span style="">0</span><span style="">&#41;</span>
        <span style="color: #530035;">rotate</span><span style="">&#40;</span><span style="">54</span><span style="">&#41;</span>
        Rh = thinRhomb<span style="">&#40;</span>L/phi, <span style="">0</span>,  draw=<span style="color: #530035;">False</span><span style="">&#41;</span>
        Rh.<span style="">contract</span><span style="">&#40;</span>minLength<span style="">&#41;</span>
        <span style="color: #530035;">pop</span><span style="">&#40;</span><span style="">&#41;</span>
        
&nbsp;
initial_Length = <span style="">600</span>
&nbsp;
R = thickRhomb<span style="">&#40;</span>initial_Length, <span style="">0</span>, draw=<span style="color: #530035;">False</span><span style="">&#41;</span>
min_side_length = <span style="">20</span>
R.<span style="">contract</span><span style="">&#40;</span>min_side_length<span style="">&#41;</span></pre></pre></b></i></a></ul></li></pre></p><br /></div>
&nbsp;<hr /><div class='comment'><strong>Posted by <span class="comment_by">Zach</span> on <em class="date">Mar 21, 2008</em></strong><p>Awesome!! </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Leandro</span> on <em class="date">Nov 29, 2008</em></strong><p>Great, thank you! it's beautiful! </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">George</span> on <em class="date">Oct 20, 2009</em></strong><p>what is intended by the five "function calls" in lines 2 through 6? </b></i></a></ul></li></pre></p><br /></div><hr /><div class='comment'><strong>Posted by <span class="comment_by">Mark M</span> on <em class="date">Oct 23, 2009</em></strong><p>George, those are just basic nodebox functions to set up the state before it starts drawing. They are all described really well in the reference pages. The transform call is the only one that is critical because as the we rotate the tiles they need the corner transform or they'll all end up on top of each other. The others just move the canvas so the art is centered, set the stroke color and width so the tiles are outlined, etc. </b></i></a></ul></li></pre></p><br /></div><? include("util/comment.php"); ?>
</div>
  
</div>

<div id="footer">
Last modified: Oct 23 2009 | &copy; 2004-2012 <a href="http://www.emrg.be/" class="noexternal">Experimental Media Research Group</a>
</div>
<img src="../g/footer.jpg" style="border:0" class="footer" width="800" height="334" />

</div>

<script>
try{e=document.getElementsByTagName("span");for(i=0;i<e.length;i++){if(e[i].className=="header_image"){src=e[i].getElementsByTagName("img")[0].src;document.getElementById("header_image").src=src;break;}}}catch(e){}
</script>
</body>

</html>